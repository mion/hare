// Generated by CoffeeScript 1.12.7
(function() {
  var Edit, __, chai, replace, testReplace;

  __ = require('./utils');

  chai = require('chai');

  Edit = require('./edit');

  replace = function(_program, _position, newProgram) {
    var idx, p, position, program;
    program = _.clone(_program);
    position = _.clone(_position);
    p = program;
    while (position.length > 1) {
      p = program[position.pop()];
    }
    idx = position.pop();
    program[idx] = newProgram;
    return program;
  };

  testReplace = function() {
    var failures, testCases, tests;
    console.log("[*] Testing 'replace'...");
    testCases = [[replace(['foo', 'bar'], [0], 'quux'), ['quux', 'bar']], [replace(['foo', ['bar'], 'quux'], [0, 1], 'lol'), ['foo', ['lol'], 'quux']]];
    failures = 0;
    tests = 0;
    _.each(testCases, function(tc) {
      var error;
      try {
        chai.expect(tc[0]).to.deep.equal(tc[1]);
        return tests += 1;
      } catch (error1) {
        error = error1;
        console.error(error);
        return failures += 1;
      }
    });
    if (failures === 0) {
      return console.log('[*] #{tests} tests pass!');
    } else {
      return console.log("[!] " + failures + " failures.");
    }
  };

  module.exports = {
    run: function() {
      return testReplace();
    }
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdHMuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbInNyY19jb2ZmZWUvdGVzdHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBLE1BQUE7O0VBQUEsRUFBQSxHQUFLLE9BQUEsQ0FBUSxTQUFSOztFQUNMLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7RUFDUCxJQUFBLEdBQU8sT0FBQSxDQUFRLFFBQVI7O0VBRVAsT0FBQSxHQUFVLFNBQUMsUUFBRCxFQUFXLFNBQVgsRUFBc0IsVUFBdEI7QUFDUixRQUFBO0lBQUEsT0FBQSxHQUFVLENBQUMsQ0FBQyxLQUFGLENBQVEsUUFBUjtJQUNWLFFBQUEsR0FBVyxDQUFDLENBQUMsS0FBRixDQUFRLFNBQVI7SUFDWCxDQUFBLEdBQUk7QUFDSixXQUFNLFFBQVEsQ0FBQyxNQUFULEdBQWtCLENBQXhCO01BQ0UsQ0FBQSxHQUFJLE9BQVEsQ0FBQSxRQUFRLENBQUMsR0FBVCxDQUFBLENBQUE7SUFEZDtJQUVBLEdBQUEsR0FBTSxRQUFRLENBQUMsR0FBVCxDQUFBO0lBQ04sT0FBUSxDQUFBLEdBQUEsQ0FBUixHQUFlO0FBQ2YsV0FBTztFQVJDOztFQVVWLFdBQUEsR0FBYyxTQUFBO0FBQ1osUUFBQTtJQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksMEJBQVo7SUFDQSxTQUFBLEdBQVksQ0FDVixDQUNFLE9BQUEsQ0FBUSxDQUFDLEtBQUQsRUFBUSxLQUFSLENBQVIsRUFBd0IsQ0FBQyxDQUFELENBQXhCLEVBQTZCLE1BQTdCLENBREYsRUFFRSxDQUFDLE1BQUQsRUFBUyxLQUFULENBRkYsQ0FEVSxFQUtWLENBQ0UsT0FBQSxDQUFRLENBQUMsS0FBRCxFQUFRLENBQUMsS0FBRCxDQUFSLEVBQWlCLE1BQWpCLENBQVIsRUFBa0MsQ0FBQyxDQUFELEVBQUksQ0FBSixDQUFsQyxFQUEwQyxLQUExQyxDQURGLEVBRUUsQ0FBQyxLQUFELEVBQVEsQ0FBQyxLQUFELENBQVIsRUFBaUIsTUFBakIsQ0FGRixDQUxVO0lBVVosUUFBQSxHQUFXO0lBQ1gsS0FBQSxHQUFRO0lBQ1IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxTQUFQLEVBQWtCLFNBQUMsRUFBRDtBQUNoQixVQUFBO0FBQUE7UUFDRSxJQUFJLENBQUMsTUFBTCxDQUFZLEVBQUcsQ0FBQSxDQUFBLENBQWYsQ0FBa0IsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQTNCLENBQWlDLEVBQUcsQ0FBQSxDQUFBLENBQXBDO2VBQ0EsS0FBQSxJQUFTLEVBRlg7T0FBQSxjQUFBO1FBR007UUFDSixPQUFPLENBQUMsS0FBUixDQUFjLEtBQWQ7ZUFDQSxRQUFBLElBQVksRUFMZDs7SUFEZ0IsQ0FBbEI7SUFPQSxJQUFHLFFBQUEsS0FBWSxDQUFmO2FBQ0UsT0FBTyxDQUFDLEdBQVIsQ0FBWSwwQkFBWixFQURGO0tBQUEsTUFBQTthQUdFLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBQSxHQUFPLFFBQVAsR0FBZ0IsWUFBNUIsRUFIRjs7RUFyQlk7O0VBMEJkLE1BQU0sQ0FBQyxPQUFQLEdBQ0U7SUFBQSxHQUFBLEVBQUssU0FBQTthQUNILFdBQUEsQ0FBQTtJQURHLENBQUw7O0FBekNGIiwic291cmNlc0NvbnRlbnQiOlsiX18gPSByZXF1aXJlICcuL3V0aWxzJ1xuY2hhaSA9IHJlcXVpcmUoJ2NoYWknKVxuRWRpdCA9IHJlcXVpcmUgJy4vZWRpdCdcblxucmVwbGFjZSA9IChfcHJvZ3JhbSwgX3Bvc2l0aW9uLCBuZXdQcm9ncmFtKSAtPlxuICBwcm9ncmFtID0gXy5jbG9uZSBfcHJvZ3JhbVxuICBwb3NpdGlvbiA9IF8uY2xvbmUgX3Bvc2l0aW9uXG4gIHAgPSBwcm9ncmFtXG4gIHdoaWxlIHBvc2l0aW9uLmxlbmd0aCA+IDFcbiAgICBwID0gcHJvZ3JhbVtwb3NpdGlvbi5wb3AoKV1cbiAgaWR4ID0gcG9zaXRpb24ucG9wKClcbiAgcHJvZ3JhbVtpZHhdID0gbmV3UHJvZ3JhbVxuICByZXR1cm4gcHJvZ3JhbVxuXG50ZXN0UmVwbGFjZSA9ICgpIC0+XG4gIGNvbnNvbGUubG9nKFwiWypdIFRlc3RpbmcgJ3JlcGxhY2UnLi4uXCIpXG4gIHRlc3RDYXNlcyA9IFtcbiAgICBbXG4gICAgICByZXBsYWNlKFsnZm9vJywgJ2JhciddLCBbMF0sICdxdXV4JyksXG4gICAgICBbJ3F1dXgnLCAnYmFyJ11cbiAgICBdLFxuICAgIFtcbiAgICAgIHJlcGxhY2UoWydmb28nLCBbJ2JhciddLCAncXV1eCddLCBbMCwgMV0sICdsb2wnKSxcbiAgICAgIFsnZm9vJywgWydsb2wnXSwgJ3F1dXgnXVxuICAgIF1cbiAgXVxuICBmYWlsdXJlcyA9IDBcbiAgdGVzdHMgPSAwXG4gIF8uZWFjaCB0ZXN0Q2FzZXMsICh0YykgLT5cbiAgICB0cnlcbiAgICAgIGNoYWkuZXhwZWN0KHRjWzBdKS50by5kZWVwLmVxdWFsKHRjWzFdKVxuICAgICAgdGVzdHMgKz0gMVxuICAgIGNhdGNoIGVycm9yXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgICAgZmFpbHVyZXMgKz0gMVxuICBpZiBmYWlsdXJlcyA9PSAwXG4gICAgY29uc29sZS5sb2cgJ1sqXSAje3Rlc3RzfSB0ZXN0cyBwYXNzISdcbiAgZWxzZVxuICAgIGNvbnNvbGUubG9nKFwiWyFdICN7ZmFpbHVyZXN9IGZhaWx1cmVzLlwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9XG4gIHJ1bjogKCkgLT5cbiAgICB0ZXN0UmVwbGFjZSgpXG4iXX0=
//# sourceURL=/Users/gvieira/code/hare/hare_framer/src_coffee/tests.coffee