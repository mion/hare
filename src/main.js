// Generated by CoffeeScript 1.12.7
(function() {
  var Editor, Key, KeyHandler, SAtom, SExpression, SList, Token, __, editor, evaluate, inconsolata, keyHandler, render,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  __ = require('./utils');

  inconsolata = Utils.loadWebFont("Inconsolata");

  SExpression = (function() {
    function SExpression(tokens1, parent1) {
      var sibling;
      this.tokens = tokens1;
      this.parent = parent1;
      this.children = [];
      this.previous = null;
      this.next = null;
      if (!_.isNil(this.parent)) {
        if (!_.isEmpty(this.parent.children)) {
          sibling = _.last(this.parent.children);
          this.previous = sibling;
          sibling.next = this;
        }
        this.parent.children.push(this);
      }
    }

    SExpression.prototype.select = function() {
      return _.each(this.tokens, function(token) {
        return token.select();
      });
    };

    SExpression.prototype.deselect = function() {
      return _.each(this.tokens, function(token) {
        return token.deselect();
      });
    };

    return SExpression;

  })();

  SAtom = (function(superClass) {
    extend(SAtom, superClass);

    function SAtom(token, parent) {
      SAtom.__super__.constructor.call(this, [token], parent);
    }

    return SAtom;

  })(SExpression);

  SList = (function(superClass) {
    extend(SList, superClass);

    function SList(tokens, parent) {
      SList.__super__.constructor.call(this, tokens, parent);
    }

    return SList;

  })(SExpression);

  Token = (function(superClass) {
    extend(Token, superClass);

    Token.prototype.DESELECTED_COLOR = '#F5F5F5';

    Token.prototype.SELECTED_COLOR = '#F5F500';

    function Token(txt, x, y) {
      Token.__super__.constructor.call(this, {
        text: txt,
        fontSize: 20,
        fontFamily: inconsolata,
        textAlign: 'center',
        x: x,
        y: y,
        color: '#000000',
        backgroundColor: this.DESELECTED_COLOR,
        borderWidth: 1,
        borderColor: '#F2F2F2',
        padding: 10
      });
    }

    Token.prototype.select = function() {
      return this.backgroundColor = this.SELECTED_COLOR;
    };

    Token.prototype.deselect = function() {
      return this.backgroundColor = this.DESELECTED_COLOR;
    };

    return Token;

  })(TextLayer);

  evaluate = function(sexp) {
    var args, operator, thing;
    if (!(_.isArray(sexp) && sexp.length > 0)) {
      return sexp;
    }
    operator = _.head(sexp);
    args = _.tail(sexp);
    if (operator === 'quote') {
      if (args.length === 1) {
        return args[0];
      } else {
        return "ERROR: wrong numbers of arguments";
      }
    }
    if (operator === 'atom') {
      if (args.length === 1) {
        thing = evaluate(args[0]);
        if ((_.isArray(thing) && _.isEmpty(thing)) || _.isString(thing)) {
          return 't';
        } else {
          return [];
        }
      } else {
        return "ERROR: wrong numbers of arguments";
      }
    }
  };

  window.evaluate = evaluate;

  render = function(exp, x, y, tokens, parentSExp) {
    var lastToken, leftParens, leftParensIndex, rightParens, slist, str;
    if (_.isString(exp)) {
      str = new Token(exp, x, y);
      tokens.push(str);
      return new SAtom(str, parentSExp);
    } else {
      leftParens = new Token("(", x, y);
      tokens.push(leftParens);
      leftParensIndex = tokens.length - 1;
      slist = new SList([], parentSExp);
      _.each(exp, function(e) {
        var lastToken;
        lastToken = _.last(tokens);
        return render(e, __.xRight(lastToken), y, tokens, slist);
      });
      lastToken = _.last(tokens);
      rightParens = new Token(")", __.xRight(lastToken), y);
      tokens.push(rightParens);
      slist.tokens = tokens.slice(leftParensIndex);
      return slist;
    }
  };

  Editor = (function() {
    function Editor() {
      this.program = [['lambda', ['x'], ['cons', 'x', ['quote', ['b']]]]];
      this.rootSExp = render(this.program, 50, 100, []);
      this.currentSExp = null;
      console.log(this.rootSExp);
    }

    Editor.prototype.goNext = function() {
      if (_.isNil(this.currentSExp)) {
        return;
      }
      if (_.isNil(this.currentSExp.next)) {
        return;
      }
      this.currentSExp.deselect();
      this.currentSExp = this.currentSExp.next;
      return this.currentSExp.select();
    };

    Editor.prototype.goPrevious = function() {
      if (_.isNil(this.currentSExp)) {
        return;
      }
      if (_.isNil(this.currentSExp.previous)) {
        return;
      }
      this.currentSExp.deselect();
      this.currentSExp = this.currentSExp.previous;
      return this.currentSExp.select();
    };

    Editor.prototype.goIn = function() {
      if (_.isNil(this.currentSExp)) {
        this.currentSExp = this.rootSExp;
        return this.currentSExp.select();
      } else {
        if (!_.isEmpty(this.currentSExp.children)) {
          this.currentSExp.deselect();
          this.currentSExp = _.first(this.currentSExp.children);
          return this.currentSExp.select();
        }
      }
    };

    Editor.prototype.goOut = function() {
      if (_.isNil(this.currentSExp)) {
        return;
      }
      this.currentSExp.deselect();
      this.currentSExp = this.currentSExp.parent;
      if (!_.isNil(this.currentSExp)) {
        return this.currentSExp.select();
      }
    };

    return Editor;

  })();

  editor = new Editor;

  Key = {
    LEFT: 72,
    RIGHT: 76,
    UP: 75,
    DOWN: 74,
    SPACE: 32,
    ENTER: 13
  };

  KeyHandler = (function() {
    function KeyHandler(editor1) {
      this.editor = editor1;
      Events.wrap(window).addEventListener('keydown', (function(_this) {
        return function(event) {
          console.log('key code', event.keyCode);
          if (event.keyCode === Key.DOWN) {
            _this.editor.goIn();
          }
          if (event.keyCode === Key.UP) {
            _this.editor.goOut();
          }
          if (event.keyCode === Key.RIGHT) {
            _this.editor.goNext();
          }
          if (event.keyCode === Key.LEFT) {
            return _this.editor.goPrevious();
          }
        };
      })(this));
    }

    return KeyHandler;

  })();

  keyHandler = new KeyHandler(editor);

  console.log('running...');

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsic3JjX2NvZmZlZS9tYWluLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0E7QUFBQSxNQUFBLGdIQUFBO0lBQUE7OztFQUFBLEVBQUEsR0FBSyxPQUFBLENBQVEsU0FBUjs7RUFFTCxXQUFBLEdBQWMsS0FBSyxDQUFDLFdBQU4sQ0FBa0IsYUFBbEI7O0VBRVI7SUFDUyxxQkFBQyxPQUFELEVBQVUsT0FBVjtBQUNYLFVBQUE7TUFEWSxJQUFDLENBQUEsU0FBRDtNQUFTLElBQUMsQ0FBQSxTQUFEO01BQ3JCLElBQUMsQ0FBQSxRQUFELEdBQVk7TUFDWixJQUFDLENBQUEsUUFBRCxHQUFZO01BQ1osSUFBQyxDQUFBLElBQUQsR0FBUTtNQUNSLElBQUcsQ0FBSSxDQUFDLENBQUMsS0FBRixDQUFRLElBQUMsQ0FBQSxNQUFULENBQVA7UUFDRSxJQUFHLENBQUksQ0FBQyxDQUFDLE9BQUYsQ0FBVSxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQWxCLENBQVA7VUFDRSxPQUFBLEdBQVUsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQWY7VUFDVixJQUFDLENBQUEsUUFBRCxHQUFZO1VBQ1osT0FBTyxDQUFDLElBQVIsR0FBZSxLQUhqQjs7UUFJQSxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFqQixDQUFzQixJQUF0QixFQUxGOztJQUpXOzswQkFVYixNQUFBLEdBQVEsU0FBQTthQUNOLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLE1BQVIsRUFBZ0IsU0FBQyxLQUFEO2VBQVcsS0FBSyxDQUFDLE1BQU4sQ0FBQTtNQUFYLENBQWhCO0lBRE07OzBCQUVSLFFBQUEsR0FBVSxTQUFBO2FBQ1IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFDLENBQUEsTUFBUixFQUFnQixTQUFDLEtBQUQ7ZUFBVyxLQUFLLENBQUMsUUFBTixDQUFBO01BQVgsQ0FB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QWhKQSIsInNvdXJjZXNDb250ZW50IjpbIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbXBvcnRzXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbl9fID0gcmVxdWlyZSAnLi91dGlscydcblxuaW5jb25zb2xhdGEgPSBVdGlscy5sb2FkV2ViRm9udChcIkluY29uc29sYXRhXCIpXG5cbmNsYXNzIFNFeHByZXNzaW9uXG4gIGNvbnN0cnVjdG9yOiAoQHRva2VucywgQHBhcmVudCkgLT5cbiAgICBAY2hpbGRyZW4gPSBbXVxuICAgIEBwcmV2aW91cyA9IG51bGxcbiAgICBAbmV4dCA9IG51bGxcbiAgICBpZiBub3QgXy5pc05pbChAcGFyZW50KVxuICAgICAgaWYgbm90IF8uaXNFbXB0eShAcGFyZW50LmNoaWxkcmVuKVxuICAgICAgICBzaWJsaW5nID0gXy5sYXN0KEBwYXJlbnQuY2hpbGRyZW4pXG4gICAgICAgIEBwcmV2aW91cyA9IHNpYmxpbmdcbiAgICAgICAgc2libGluZy5uZXh0ID0gdGhpc1xuICAgICAgQHBhcmVudC5jaGlsZHJlbi5wdXNoKHRoaXMpXG4gIHNlbGVjdDogKCkgLT5cbiAgICBfLmVhY2ggQHRva2VucywgKHRva2VuKSAtPiB0b2tlbi5zZWxlY3QoKVxuICBkZXNlbGVjdDogKCkgLT5cbiAgICBfLmVhY2ggQHRva2VucywgKHRva2VuKSAtPiB0b2tlbi5kZXNlbGVjdCgpXG5cbmNsYXNzIFNBdG9tIGV4dGVuZHMgU0V4cHJlc3Npb25cbiAgY29uc3RydWN0b3I6ICh0b2tlbiwgcGFyZW50KSAtPlxuICAgIHN1cGVyIFt0b2tlbl0sIHBhcmVudFxuXG5jbGFzcyBTTGlzdCBleHRlbmRzIFNFeHByZXNzaW9uXG4gIGNvbnN0cnVjdG9yOiAodG9rZW5zLCBwYXJlbnQpIC0+XG4gICAgc3VwZXIgdG9rZW5zLCBwYXJlbnRcblxuY2xhc3MgVG9rZW4gZXh0ZW5kcyBUZXh0TGF5ZXJcbiAgREVTRUxFQ1RFRF9DT0xPUjogJyNGNUY1RjUnXG4gIFNFTEVDVEVEX0NPTE9SOiAnI0Y1RjUwMCdcbiAgY29uc3RydWN0b3I6ICh0eHQsIHgsIHkpIC0+XG4gICAgc3VwZXJcbiAgICAgIHRleHQ6IHR4dFxuICAgICAgZm9udFNpemU6IDIwXG4gICAgICBmb250RmFtaWx5OiBpbmNvbnNvbGF0YVxuICAgICAgdGV4dEFsaWduOiAnY2VudGVyJ1xuICAgICAgeDogeFxuICAgICAgeTogeVxuICAgICAgY29sb3I6ICcjMDAwMDAwJ1xuICAgICAgYmFja2dyb3VuZENvbG9yOiBAREVTRUxFQ1RFRF9DT0xPUlxuICAgICAgYm9yZGVyV2lkdGg6IDFcbiAgICAgIGJvcmRlckNvbG9yOiAnI0YyRjJGMidcbiAgICAgIHBhZGRpbmc6IDEwXG4gIHNlbGVjdDogKCkgLT5cbiAgICBAYmFja2dyb3VuZENvbG9yID0gQFNFTEVDVEVEX0NPTE9SXG4gIGRlc2VsZWN0OiAoKSAtPlxuICAgIEBiYWNrZ3JvdW5kQ29sb3IgPSBAREVTRUxFQ1RFRF9DT0xPUlxuXG5ldmFsdWF0ZSA9IChzZXhwKSAtPlxuICByZXR1cm4gc2V4cCB1bmxlc3MgXy5pc0FycmF5KHNleHApICYmIHNleHAubGVuZ3RoID4gMFxuICBvcGVyYXRvciA9IF8uaGVhZChzZXhwKVxuICBhcmdzID0gXy50YWlsKHNleHApXG4gIGlmIG9wZXJhdG9yIGlzICdxdW90ZSdcbiAgICBpZiBhcmdzLmxlbmd0aCA9PSAxXG4gICAgICByZXR1cm4gYXJnc1swXVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBcIkVSUk9SOiB3cm9uZyBudW1iZXJzIG9mIGFyZ3VtZW50c1wiXG4gIGlmIG9wZXJhdG9yIGlzICdhdG9tJ1xuICAgIGlmIGFyZ3MubGVuZ3RoID09IDFcbiAgICAgIHRoaW5nID0gZXZhbHVhdGUoYXJnc1swXSlcbiAgICAgIHJldHVybiBpZiAoXy5pc0FycmF5KHRoaW5nKSBhbmQgXy5pc0VtcHR5KHRoaW5nKSkgb3IgXy5pc1N0cmluZyh0aGluZykgdGhlbiAndCcgZWxzZSBbXVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBcIkVSUk9SOiB3cm9uZyBudW1iZXJzIG9mIGFyZ3VtZW50c1wiXG5cbndpbmRvdy5ldmFsdWF0ZSA9IGV2YWx1YXRlXG5cbnJlbmRlciA9IChleHAsIHgsIHksIHRva2VucywgcGFyZW50U0V4cCkgLT5cbiAgaWYgXy5pc1N0cmluZyhleHApXG4gICAgc3RyID0gbmV3IFRva2VuKGV4cCwgeCwgeSlcbiAgICB0b2tlbnMucHVzaChzdHIpXG4gICAgcmV0dXJuIG5ldyBTQXRvbShzdHIsIHBhcmVudFNFeHApXG4gIGVsc2VcbiAgICBsZWZ0UGFyZW5zID0gbmV3IFRva2VuKFwiKFwiLCB4LCB5KVxuICAgIHRva2Vucy5wdXNoKGxlZnRQYXJlbnMpXG4gICAgbGVmdFBhcmVuc0luZGV4ID0gdG9rZW5zLmxlbmd0aCAtIDFcbiAgICBzbGlzdCA9IG5ldyBTTGlzdChbXSwgcGFyZW50U0V4cClcbiAgICBfLmVhY2ggZXhwLCAoZSkgLT5cbiAgICAgIGxhc3RUb2tlbiA9IF8ubGFzdCh0b2tlbnMpXG4gICAgICByZW5kZXIoZSwgX18ueFJpZ2h0KGxhc3RUb2tlbiksIHksIHRva2Vucywgc2xpc3QpXG4gICAgbGFzdFRva2VuID0gXy5sYXN0KHRva2VucylcbiAgICByaWdodFBhcmVucyA9IG5ldyBUb2tlbihcIilcIiwgX18ueFJpZ2h0KGxhc3RUb2tlbiksIHkpXG4gICAgdG9rZW5zLnB1c2gocmlnaHRQYXJlbnMpXG4gICAgc2xpc3QudG9rZW5zID0gdG9rZW5zLnNsaWNlKGxlZnRQYXJlbnNJbmRleClcbiAgICByZXR1cm4gc2xpc3RcblxuY2xhc3MgRWRpdG9yXG4gIGNvbnN0cnVjdG9yOiAoKSAtPlxuICAgIEBwcm9ncmFtID0gW1snbGFtYmRhJywgWyd4J10sIFsnY29ucycsICd4JywgWydxdW90ZScsIFsnYiddXV1dXVxuICAgIEByb290U0V4cCA9IHJlbmRlciBAcHJvZ3JhbSwgNTAsIDEwMCwgW11cbiAgICBAY3VycmVudFNFeHAgPSBudWxsXG4gICAgY29uc29sZS5sb2coQHJvb3RTRXhwKVxuICBnb05leHQ6ICgpIC0+XG4gICAgcmV0dXJuIGlmIF8uaXNOaWwoQGN1cnJlbnRTRXhwKVxuICAgIHJldHVybiBpZiBfLmlzTmlsKEBjdXJyZW50U0V4cC5uZXh0KVxuICAgIEBjdXJyZW50U0V4cC5kZXNlbGVjdCgpXG4gICAgQGN1cnJlbnRTRXhwID0gQGN1cnJlbnRTRXhwLm5leHRcbiAgICBAY3VycmVudFNFeHAuc2VsZWN0KClcbiAgZ29QcmV2aW91czogKCkgLT5cbiAgICByZXR1cm4gaWYgXy5pc05pbChAY3VycmVudFNFeHApXG4gICAgcmV0dXJuIGlmIF8uaXNOaWwoQGN1cnJlbnRTRXhwLnByZXZpb3VzKVxuICAgIEBjdXJyZW50U0V4cC5kZXNlbGVjdCgpXG4gICAgQGN1cnJlbnRTRXhwID0gQGN1cnJlbnRTRXhwLnByZXZpb3VzXG4gICAgQGN1cnJlbnRTRXhwLnNlbGVjdCgpXG4gIGdvSW46ICgpIC0+XG4gICAgaWYgXy5pc05pbChAY3VycmVudFNFeHApXG4gICAgICBAY3VycmVudFNFeHAgPSBAcm9vdFNFeHBcbiAgICAgIEBjdXJyZW50U0V4cC5zZWxlY3QoKVxuICAgIGVsc2VcbiAgICAgIGlmIG5vdCBfLmlzRW1wdHkoQGN1cnJlbnRTRXhwLmNoaWxkcmVuKVxuICAgICAgICBAY3VycmVudFNFeHAuZGVzZWxlY3QoKVxuICAgICAgICBAY3VycmVudFNFeHAgPSBfLmZpcnN0KEBjdXJyZW50U0V4cC5jaGlsZHJlbilcbiAgICAgICAgQGN1cnJlbnRTRXhwLnNlbGVjdCgpXG4gIGdvT3V0OiAoKSAtPlxuICAgIHJldHVybiBpZiBfLmlzTmlsKEBjdXJyZW50U0V4cClcbiAgICBAY3VycmVudFNFeHAuZGVzZWxlY3QoKVxuICAgIEBjdXJyZW50U0V4cCA9IEBjdXJyZW50U0V4cC5wYXJlbnRcbiAgICBAY3VycmVudFNFeHAuc2VsZWN0KCkgdW5sZXNzIF8uaXNOaWwoQGN1cnJlbnRTRXhwKVxuXG5lZGl0b3IgPSBuZXcgRWRpdG9yXG5cbktleSA9XG4gIExFRlQ6IDcyXG4gIFJJR0hUOiA3NlxuICBVUDogNzVcbiAgRE9XTjogNzRcbiAgU1BBQ0U6IDMyXG4gIEVOVEVSOiAxM1xuXG5jbGFzcyBLZXlIYW5kbGVyXG4gIGNvbnN0cnVjdG9yOiAoQGVkaXRvcikgLT5cbiAgICBFdmVudHMud3JhcCh3aW5kb3cpLmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nLCAoZXZlbnQpID0+XG4gICAgICBjb25zb2xlLmxvZyAna2V5IGNvZGUnLCBldmVudC5rZXlDb2RlXG4gICAgICBpZiBldmVudC5rZXlDb2RlIGlzIEtleS5ET1dOXG4gICAgICAgIEBlZGl0b3IuZ29JbigpXG4gICAgICBpZiBldmVudC5rZXlDb2RlIGlzIEtleS5VUFxuICAgICAgICBAZWRpdG9yLmdvT3V0KClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5LlJJR0hUXG4gICAgICAgIEBlZGl0b3IuZ29OZXh0KClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5LkxFRlRcbiAgICAgICAgQGVkaXRvci5nb1ByZXZpb3VzKClcblxua2V5SGFuZGxlciA9IG5ldyBLZXlIYW5kbGVyKGVkaXRvcilcblxuY29uc29sZS5sb2cgJ3J1bm5pbmcuLi4nXG4iXX0=
//# sourceURL=/Users/gvieira/Dropbox/design/Projects/Hare/hare.io/Framer/Project/src_coffee/main.coffee