// Generated by CoffeeScript 1.12.7
(function() {
  var Editor, KeyForCommand, KeyHandler, Parser, SAtom, SExpression, SList, Token, __, _walk, beautify, compile, editor, evaluate, getSexp, inconsolata, key, keyHandler, lg, render, set, walk,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  __ = require('./utils');

  beautify = require('js-beautify').js_beautify;

  Parser = require('./parser');

  inconsolata = Utils.loadWebFont("Inconsolata");

  Parser.test();

  lg = console.log;

  SExpression = (function() {
    function SExpression(tokens1, parent1, program1) {
      var sibling;
      this.tokens = tokens1;
      this.parent = parent1;
      this.program = program1;
      this.id = _.uniqueId('sexp_');
      this.children = [];
      this.previous = null;
      this.next = null;
      if (!_.isNil(this.parent)) {
        if (!_.isEmpty(this.parent.children)) {
          sibling = _.last(this.parent.children);
          this.previous = sibling;
          sibling.next = this;
        }
        this.parent.children.push(this);
      }
    }

    SExpression.prototype.toString = function() {
      if (this.tokens != null) {
        return this.tokens.map(function(t) {
          return t.text;
        }).join(' ');
      } else {
        return "NULL";
      }
    };

    SExpression.prototype.select = function(visitedTokenById, siblingIndex, parentIndex) {
      return _.each(this.tokens, function(token) {
        if (!visitedTokenById[token.id]) {
          visitedTokenById[token.id] = true;
          return token.select(siblingIndex, parentIndex);
        }
      });
    };

    SExpression.prototype.deselect = function(visitedTokenById, siblingIndex, parentIndex) {
      return _.each(this.tokens, function(token) {
        if (!visitedTokenById[token.id]) {
          visitedTokenById[token.id] = true;
          return token.deselect();
        }
      });
    };

    return SExpression;

  })();

  SAtom = (function(superClass) {
    extend(SAtom, superClass);

    function SAtom(token, parent, program) {
      this.isAtom = true;
      this.isList = false;
      SAtom.__super__.constructor.call(this, [token], parent, program);
    }

    return SAtom;

  })(SExpression);

  SList = (function(superClass) {
    extend(SList, superClass);

    function SList(tokens, parent, program) {
      this.isAtom = false;
      this.isList = true;
      SList.__super__.constructor.call(this, tokens, parent, program);
    }

    return SList;

  })(SExpression);

  Token = (function(superClass) {
    extend(Token, superClass);

    Token.prototype.BACKGROUND_COLOR_DESELECTED = '#FFFFFF';

    Token.prototype.TEXT_COLOR_DESELECTED = '#AAA';

    Token.prototype.BACKGROUND_COLOR_SELECTED = '#F8F8F8';

    Token.prototype.TEXT_COLOR_SELECTED = '#000000';

    function Token(txt, x, y, tokenGroup) {
      Token.__super__.constructor.call(this, {
        parent: tokenGroup,
        text: txt,
        fontSize: 12,
        fontFamily: inconsolata,
        textAlign: 'center',
        x: x,
        y: y,
        color: this.TEXT_COLOR_DESELECTED,
        backgroundColor: this.BACKGROUND_COLOR_DESELECTED,
        padding: 10
      });
    }

    Token.prototype.select = function(siblingIndex, parentIndex) {
      if (siblingIndex === 0 && parentIndex === 0) {
        this.backgroundColor = '#000';
        return this.color = '#FFF';
      } else if (siblingIndex === 0 && parentIndex === -1) {
        this.backgroundColor = '#555';
        this.color = '#AAA';
        return this.fontWeight = 'bold';
      } else if (siblingIndex !== 0 && parentIndex === 0) {
        this.backgroundColor = '#F2F2F2';
        return this.color = '#000';
      } else {
        this.backgroundColor = '#FFF';
        return this.color = '#BBB';
      }
    };

    Token.prototype.deselect = function() {
      this.backgroundColor = this.BACKGROUND_COLOR_DESELECTED;
      return this.color = this.TEXT_COLOR_DESELECTED;
    };

    return Token;

  })(TextLayer);

  evaluate = function(sexp) {
    var args, operator, thing;
    if (!(_.isArray(sexp) && sexp.length > 0)) {
      return sexp;
    }
    operator = _.head(sexp);
    args = _.tail(sexp);
    if (operator === 'quote') {
      if (args.length === 1) {
        return args[0];
      } else {
        return "ERROR: wrong numbers of arguments";
      }
    }
    if (operator === 'atom') {
      if (args.length === 1) {
        thing = evaluate(args[0]);
        if ((_.isArray(thing) && _.isEmpty(thing)) || _.isString(thing)) {
          return 't';
        } else {
          return [];
        }
      } else {
        return "ERROR: wrong numbers of arguments";
      }
    }
  };

  window.evaluate = evaluate;

  compile = function(program) {
    var arglist, args, body, bodyStr, exps, rest;
    if (!_.isArray(program)) {
      return program;
    }
    if (_.first(program) === 'do') {
      exps = _.chain(program).drop(1).map(compile).value();
      body = _.dropRight(exps).concat("return " + (_.last(exps)) + ";");
      bodyStr = body.join(";\n");
      return "(function () { " + bodyStr + " })()";
    } else if (_.first(program) === 'var') {
      return "var " + program[1] + " = (" + (compile(program[2])) + ")";
    } else if (program[0] === 'func') {
      args = program[1].join(', ');
      rest = _.chain(program).drop(2).map(compile).value();
      return "function (" + args + ") { return " + rest + "; }";
    } else if (program[0] === '*') {
      return "(" + program[1] + ") * (" + program[2] + ")";
    } else {
      arglist = _.chain(program).tail().map(compile).value();
      return program[0] + "(" + arglist + ")";
    }
  };

  render = function(exp, x, y, tokens, parentSExp, tokenGroup) {
    var lastToken, leftParens, leftParensIndex, rightParens, slist, str;
    if (_.isString(exp)) {
      str = new Token(exp, x, y, tokenGroup);
      tokens.push(str);
      return new SAtom(str, parentSExp, exp);
    } else {
      leftParens = new Token("(", x, y, tokenGroup);
      tokens.push(leftParens);
      leftParensIndex = tokens.length - 1;
      slist = new SList([], parentSExp, exp);
      _.each(exp, function(e) {
        var lastToken;
        lastToken = _.last(tokens);
        return render(e, __.xRight(lastToken), y, tokens, slist, tokenGroup);
      });
      lastToken = _.last(tokens);
      rightParens = new Token(")", __.xRight(lastToken), y, tokenGroup);
      tokens.push(rightParens);
      slist.tokens = tokens.slice(leftParensIndex);
      return slist;
    }
  };

  walk = function(sexp, callback) {
    var visitedSExpressionById, visitedTokenById;
    console.log("walking from: ", sexp.toString());
    visitedSExpressionById = {};
    visitedTokenById = {};
    return _walk(sexp, callback, visitedSExpressionById, visitedTokenById, [0, 0]);
  };

  _walk = function(sexp, callback, visitedSExpressionById, visitedTokenById, indexPair) {
    var nextIndex, parentIndex, previousIndex, siblingIndex, upIndex;
    if (sexp == null) {
      return;
    }
    if (visitedSExpressionById[sexp.id]) {
      return;
    }
    visitedSExpressionById[sexp.id] = true;
    siblingIndex = indexPair[0];
    parentIndex = indexPair[1];
    callback(sexp, visitedTokenById, siblingIndex, parentIndex);
    nextIndex = siblingIndex != null ? siblingIndex + 1 : null;
    previousIndex = siblingIndex != null ? siblingIndex - 1 : null;
    upIndex = parentIndex != null ? parentIndex - 1 : null;
    _walk(sexp.next, callback, visitedSExpressionById, visitedTokenById, [nextIndex, parentIndex]);
    _walk(sexp.previous, callback, visitedSExpressionById, visitedTokenById, [previousIndex, parentIndex]);
    if (sexp.previous == null) {
      return _walk(sexp.parent, callback, visitedSExpressionById, visitedTokenById, [0, upIndex]);
    }
  };

  set = function(program, position, value) {
    var idx;
    lg("set(" + program + ", " + position + ", " + value + ")");
    idx = position.pop();
    if (idx != null) {
      if (typeof _.isEmpty === "function" ? _.isEmpty(position) : void 0) {
        return program[idx] = value;
      } else {
        return set(program[idx], position, value);
      }
    }
  };

  getSexp = function(sexp, position) {
    var idx;
    lg("getSexp<" + sexp + "><" + position + ">");
    idx = position.pop();
    if (idx != null) {
      return getSexp(sexp.children[idx], position);
    } else {
      return sexp;
    }
  };

  Editor = (function() {
    function Editor() {
      this.tokenGroup = new Layer;
      this.compiledBox = new TextLayer({
        text: 'compiled',
        fontSize: 13,
        fontFamily: inconsolata,
        textAlign: 'left',
        x: 0,
        y: Screen.height / 2,
        width: Screen.width / 2,
        height: Screen.height / 2,
        color: '#000',
        backgroundColor: '#F6F6F6',
        padding: 10,
        borderColor: '#000',
        borderWidth: 1
      });
      this.outputBox = new TextLayer({
        text: 'output',
        fontSize: 13,
        fontFamily: inconsolata,
        textAlign: 'left',
        x: Screen.width / 2,
        y: Screen.height / 2,
        width: Screen.width / 2,
        height: Screen.height / 2,
        color: '#000',
        backgroundColor: '#F6F6F6',
        padding: 10,
        borderColor: '#000',
        borderWidth: 1
      });
    }

    Editor.prototype.build = function(program) {
      this.program = program;
      this.currentPosition = [];
      this.currentSExp = null;
      this.rootSExp = render(this.program, 0, 0, [], null, this.tokenGroup);
      this.tokenGroup.height = this.rootSExp.tokens[0].height;
      this.tokenGroup.width = _.reduce(_.map(this.rootSExp.tokens, function(t) {
        return t.width;
      }), _.add, 0);
      this.tokenGroup.x = Align.center;
      return this.tokenGroup.y = (Screen.height / 2) - this.tokenGroup.height - 10;
    };

    Editor.prototype.jump = function(pos) {
      var newSexp;
      this.currentPosition = _.clone(pos);
      newSexp = getSexp(this.rootSExp, pos);
      return this.setCurrentSExp(newSexp);
    };

    Editor.prototype.go = function(dir) {
      var targetSExp;
      if (_.isNil(this.currentSExp) && dir !== 'in') {
        return false;
      }
      targetSExp = _.isNil(this.currentSExp) ? this.rootSExp : {
        next: this.currentSExp.next,
        previous: this.currentSExp.previous,
        "in": _.first(this.currentSExp.children),
        out: this.currentSExp.parent
      }[dir];
      if (targetSExp != null) {
        this.setCurrentSExp(targetSExp);
        return true;
      } else if (this.currentSExp === this.rootSExp && dir === 'out') {
        this.setCurrentSExp(null);
        return true;
      } else {
        return false;
      }
    };

    Editor.prototype.setCurrentSExp = function(newSexp) {
      walk(this.rootSExp, function(sexp, visitedTokenById, siblingIndex, parentIndex) {
        return sexp.deselect(visitedTokenById, siblingIndex, parentIndex);
      });
      if (newSexp != null) {
        this.currentSExp = newSexp;
        return walk(this.currentSExp, function(sexp, visitedTokenById, siblingIndex, parentIndex) {
          return sexp.select(visitedTokenById, siblingIndex, parentIndex);
        });
      } else {
        return this.currentSExp = null;
      }
    };

    Editor.prototype.goNext = function() {
      if (this.go('next')) {
        return this.currentPosition[0] += 1;
      }
    };

    Editor.prototype.goPrevious = function() {
      if (this.go('previous')) {
        return this.currentPosition[0] -= 1;
      }
    };

    Editor.prototype.goIn = function() {
      if (this.go('in') && this.currentSExp !== this.rootSExp) {
        return this.currentPosition.unshift(0);
      }
    };

    Editor.prototype.goOut = function() {
      if (this.go('out') && this.currentSExp !== this.rootSExp) {
        return this.currentPosition.shift();
      }
    };

    Editor.prototype.compile = function() {
      var beautifulSource, compiledSource, error, output;
      if (this.currentSExp != null) {
        compiledSource = compile(this.currentSExp.program);
        beautifulSource = beautify(compiledSource, {
          indent_size: 2
        });
        this.compiledBox.text = compiledSource;
        console.log("[*] INPUT\n", this.currentSExp.program);
        console.log("[*] COMPILED\n", compiledSource);
        try {
          output = eval(compiledSource);
          this.outputBox.text = output;
          return console.log("[*] RUN OK\n", output);
        } catch (error1) {
          error = error1;
          console.log("[!] RUN ERROR\n", error);
          return this.outputBox.text = error.toString();
        }
      } else {
        return console.log('[!] No expression selected.');
      }
    };

    Editor.prototype.replace = function() {
      var pos, sexp, value;
      sexp = this.currentSExp;
      if (sexp != null) {
        value = prompt("Replace '" + sexp + "' with what?");
        if (value != null) {
          window.prog = this.program;
          pos = _.clone(this.currentPosition);
          set(this.program, _.clone(pos), value);
          lg('currentPosition: ', pos);
          this.build(this.program);
          this.jump(_.clone(pos));
          return lg(this.program);
        }
      }
    };

    return Editor;

  })();

  editor = new Editor;

  editor.build(['do', ['var', "size", '32'], ['var', "square", ['func', ['x'], ['*', 'x', 'x']]], ['square', 'size']]);

  key = {
    h: 72,
    i: 73,
    j: 74,
    k: 75,
    l: 76,
    r: 82,
    space: 32,
    enter: 13,
    shift: 16
  };

  KeyForCommand = {
    GO_IN: key.j,
    GO_OUT: key.k,
    GO_PREVIOUS: key.h,
    GO_NEXT: key.l,
    COMPILE: key.enter,
    REPLACE: key.r
  };

  KeyHandler = (function() {
    function KeyHandler(editor1) {
      this.editor = editor1;
      this.isDown = {};
      Events.wrap(window).addEventListener('keyup', (function(_this) {
        return function(event) {
          console.log('key up', event.keyCode);
          return delete _this.isDown[event.keyCode];
        };
      })(this));
      Events.wrap(window).addEventListener('keydown', (function(_this) {
        return function(event) {
          var currPos;
          console.log('key down', event.keyCode);
          currPos = _.clone(editor.currentPosition);
          _this.isDown[event.keyCode] = true;
          if (event.keyCode === KeyForCommand.GO_IN) {
            _this.editor.goIn();
          }
          if (event.keyCode === KeyForCommand.GO_OUT) {
            _this.editor.goOut();
          }
          if (event.keyCode === KeyForCommand.GO_NEXT) {
            _this.editor.goNext();
          }
          if (event.keyCode === KeyForCommand.GO_PREVIOUS) {
            _this.editor.goPrevious();
          }
          if (event.keyCode === KeyForCommand.COMPILE) {
            _this.editor.compile();
          }
          if (event.keyCode === KeyForCommand.REPLACE) {
            _this.editor.replace();
          }
          return lg("pos: " + currPos + " -> " + editor.currentPosition);
        };
      })(this));
    }

    return KeyHandler;

  })();

  keyHandler = new KeyHandler(editor);

  console.log('running...');

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsic3JjX2NvZmZlZS9tYWluLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0E7QUFBQSxNQUFBLHlMQUFBO0lBQUE7OztFQUFBLEVBQUEsR0FBSyxPQUFBLENBQVEsU0FBUjs7RUFDTCxRQUFBLEdBQVcsT0FBQSxDQUFRLGFBQVIsQ0FBc0IsQ0FBQzs7RUFDbEMsTUFBQSxHQUFTLE9BQUEsQ0FBUSxVQUFSOztFQUVULFdBQUEsR0FBYyxLQUFLLENBQUMsV0FBTixDQUFrQixhQUFsQjs7RUFFZCxNQUFNLENBQUMsSUFBUCxDQUFBOztFQUVBLEVBQUEsR0FBSyxPQUFPLENBQUM7O0VBRVA7SUFDUyxxQkFBQyxPQUFELEVBQVUsT0FBVixFQUFtQixRQUFuQjtBQUNYLFVBQUE7TUFEWSxJQUFDLENBQUEsU0FBRDtNQUFTLElBQUMsQ0FBQSxTQUFEO01BQVMsSUFBQyxDQUFBLFVBQUQ7TUFDOUIsSUFBQyxDQUFBLEVBQUQsR0FBTSxDQUFDLENBQUMsUUFBRixDQUFXLE9BQVg7TUFDTixJQUFDLENBQUEsUUFBRCxHQUFZO01BQ1osSUFBQyxDQUFBLFFBQUQsR0FBWTtNQUNaLElBQUMsQ0FBQSxJQUFELEdBQVE7TUFDUixJQUFHLENBQUksQ0FBQyxDQUFDLEtBQUYsQ0FBUSxJQUFDLENBQUEsTUFBVCxDQUFQO1FBQ0UsSUFBRyxDQUFJLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFsQixDQUFQO1VBQ0UsT0FBQSxHQUFVLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFmO1VBQ1YsSUFBQyxDQUFBLFFBQUQsR0FBWTtVQUNaLE9BQU8sQ0FBQyxJQUFSLEdBQWUsS0FIakI7O1FBSUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBakIsQ0FBc0IsSUFBdEIsRUFMRjs7SUFMVzs7MEJBV2IsUUFBQSxHQUFVLFNBQUE7TUFDUixJQUFHLG1CQUFIO2VBQWlCLElBQUMsQ0FBQSxNQUFNLENBQUMsR0FBUixDQUFZLFNBQUMsQ0FBRDtpQkFBTyxDQUFDLENBQUM7UUFBVCxDQUFaLENBQTBCLENBQUMsSUFBM0IsQ0FBZ0MsR0FBaEMsRUFBakI7T0FBQSxNQUFBO2VBQTJELE9BQTNEOztJQURROzswQkFFVixNQUFBLEdBQVEsU0FBQyxnQkFBRCxFQUFtQixZQUFuQixFQUFpQyxXQUFqQzthQUNOLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLE1BQVIsRUFBZ0IsU0FBQyxLQUFEO1FBQ2QsSUFBRyxDQUFJLGdCQUFpQixDQUFBLEtBQUssQ0FBQyxFQUFOLENBQXhCO1VBQ0UsZ0JBQWlCLENBQUEsS0FBSyxDQUFDLEVBQU4sQ0FBakIsR0FBNkI7aUJBQzdCLEtBQUssQ0FBQyxNQUFOLENBQWEsWUFBYixFQUEyQixXQUEzQixFQUZGOztNQURjLENBQWhCO0lBRE07OzBCQUtSLFFBQUEsR0FBVSxTQUFDLGdCQUFELEVBQW1CLFlBQW5CLEVBQWlDLFdBQWpDO2FBQ1IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFDLENBQUEsTUFBUixFQUFnQixTQUFDLEtBQUQ7UUFDZCxJQUFHLENBQUksZ0JBQWlCLENBQUEsS0FBSyxDQUFDLEVBQU4sQ0FBeEI7VUFDRSxnQkFBaUIsQ0FBQSxLQUFLLENBQUMsRUFBTixDQUFqQixHQUE2QjtpQkFDN0IsS0FBSyxDQUFDLFFBQU4sQ0FBQSxFQUZGOztNQURjLENBQWhCO0lBRFE7Ozs7OztFQU1OOzs7SUFDUyxlQUFDLEtBQUQsRUFBUSxNQUFSLEVBQWdCLE9BQWhCO01BQ1gsSUFBQyxDQUFBLE1BQUQsR0FBVTtNQUNWLElBQUMsQ0FBQSxNQUFELEdBQVU7TUFDVix1Q0FBTSxDQUFDLEtBQUQsQ0FBTixFQUFlLE1BQWYsRUFBdUIsT0FBdkI7SUFIVzs7OztLQURLOztFQU1kOzs7SUFDUyxlQUFDLE1BQUQsRUFBUyxNQUFULEVBQWlCLE9BQWpCO01BQ1gsSUFBQyxDQUFBLE1BQUQsR0FBVTtNQUNWLElBQUMsQ0FBQSxNQUFELEdBQVU7TUFDVix1Q0FBTSxNQUFOLEVBQWMsTUFBZCxFQUFzQixPQUF0QjtJQUhXOzs7O0tBREs7O0VBTWQ7OztvQkFDSiwyQkFBQSxHQUE2Qjs7b0JBQzdCLHFCQUFBLEdBQXVCOztvQkFDdkIseUJBQUEsR0FBMkI7O29CQUMzQixtQkFBQSxHQUFxQjs7SUFDUixlQUFDLEdBQUQsRUFBTSxDQUFOLEVBQVMsQ0FBVCxFQUFZLFVBQVo7TUFDWCx1Q0FDRTtRQUFBLE1BQUEsRUFBUSxVQUFSO1FBQ0EsSUFBQSxFQUFNLEdBRE47UUFFQSxRQUFBLEVBQVUsRUFGVjtRQUdBLFVBQUEsRUFBWSxXQUhaO1FBSUEsU0FBQSxFQUFXLFFBSlg7UUFLQSxDQUFBLEVBQUcsQ0FMSDtRQU1BLENBQUEsRUFBRyxDQU5IO1FBT0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxxQkFQUjtRQVFBLGVBQUEsRUFBaUIsSUFBQyxDQUFBLDJCQVJsQjtRQVNBLE9BQUEsRUFBUyxFQVRUO09BREY7SUFEVzs7b0JBWWIsTUFBQSxHQUFRLFNBQUMsWUFBRCxFQUFlLFdBQWY7TUFFTixJQUFHLFlBQUEsS0FBZ0IsQ0FBaEIsSUFBcUIsV0FBQSxLQUFlLENBQXZDO1FBQ0UsSUFBQyxDQUFBLGVBQUQsR0FBbUI7ZUFDbkIsSUFBQyxDQUFBLEtBQUQsR0FBUyxPQUZYO09BQUEsTUFHSyxJQUFHLFlBQUEsS0FBZ0IsQ0FBaEIsSUFBcUIsV0FBQSxLQUFlLENBQUMsQ0FBeEM7UUFDSCxJQUFDLENBQUEsZUFBRCxHQUFtQjtRQUNuQixJQUFDLENBQUEsS0FBRCxHQUFTO2VBQ1QsSUFBQyxDQUFBLFVBQUQsR0FBYyxPQUhYO09BQUEsTUFJQSxJQUFHLFlBQUEsS0FBZ0IsQ0FBaEIsSUFBcUIsV0FBQSxLQUFlLENBQXZDO1FBQ0gsSUFBQyxDQUFBLGVBQUQsR0FBbUI7ZUFDbkIsSUFBQyxDQUFBLEtBQUQsR0FBUyxPQUZOO09BQUEsTUFBQTtRQUlILElBQUMsQ0FBQSxlQUFELEdBQW1CO2VBQ25CLElBQUMsQ0FBQSxLQUFELEdBQVMsT0FMTjs7SUFUQzs7b0JBZVIsUUFBQSxHQUFVLFNBQUE7TUFDUixJQUFDLENBQUEsZUFBRCxHQUFtQixJQUFDLENBQUE7YUFDcEIsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUE7SUFGRjs7OztLQWhDUTs7RUF1Q3BCLFFBQUEsR0FBVyxTQUFDLElBQUQ7QUFDVCxRQUFBO0lBQUEsSUFBQSxDQUFBLENBQW1CLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBVixDQUFBLElBQW1CLElBQUksQ0FBQyxNQUFMLEdBQWMsQ0FBcEQsQ0FBQTtBQUFBLGFBQU8sS0FBUDs7SUFDQSxRQUFBLEdBQVcsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFQO0lBQ1gsSUFBQSxHQUFPLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBUDtJQUNQLElBQUcsUUFBQSxLQUFZLE9BQWY7TUFDRSxJQUFHLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBbEI7QUFDRSxlQUFPLElBQUssQ0FBQSxDQUFBLEVBRGQ7T0FBQSxNQUFBO0FBR0UsZUFBTyxvQ0FIVDtPQURGOztJQUtBLElBQUcsUUFBQSxLQUFZLE1BQWY7TUFDRSxJQUFHLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBbEI7UUFDRSxLQUFBLEdBQVEsUUFBQSxDQUFTLElBQUssQ0FBQSxDQUFBLENBQWQ7UUFDRCxJQUFHLENBQUMsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxLQUFWLENBQUEsSUFBcUIsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxLQUFWLENBQXRCLENBQUEsSUFBMkMsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxLQUFYLENBQTlDO2lCQUFxRSxJQUFyRTtTQUFBLE1BQUE7aUJBQThFLEdBQTlFO1NBRlQ7T0FBQSxNQUFBO0FBSUUsZUFBTyxvQ0FKVDtPQURGOztFQVRTOztFQWdCWCxNQUFNLENBQUMsUUFBUCxHQUFrQjs7RUFJbEIsT0FBQSxHQUFVLFNBQUMsT0FBRDtBQUNSLFFBQUE7SUFBQSxJQUFBLENBQXNCLENBQUMsQ0FBQyxPQUFGLENBQVUsT0FBVixDQUF0QjtBQUFBLGFBQU8sUUFBUDs7SUFDQSxJQUFHLENBQUMsQ0FBQyxLQUFGLENBQVEsT0FBUixDQUFBLEtBQW9CLElBQXZCO01BQ0UsSUFBQSxHQUFPLENBQUMsQ0FBQyxLQUFGLENBQVEsT0FBUixDQUFnQixDQUFDLElBQWpCLENBQXNCLENBQXRCLENBQXdCLENBQUMsR0FBekIsQ0FBNkIsT0FBN0IsQ0FBcUMsQ0FBQyxLQUF0QyxDQUFBO01BQ1AsSUFBQSxHQUFPLENBQUMsQ0FBQyxTQUFGLENBQVksSUFBWixDQUFpQixDQUFDLE1BQWxCLENBQXlCLFNBQUEsR0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBUCxDQUFELENBQVQsR0FBdUIsR0FBaEQ7TUFDUCxPQUFBLEdBQVUsSUFBSSxDQUFDLElBQUwsQ0FBVSxLQUFWO2FBQ1YsaUJBQUEsR0FBa0IsT0FBbEIsR0FBMEIsUUFKNUI7S0FBQSxNQUtLLElBQUcsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxPQUFSLENBQUEsS0FBb0IsS0FBdkI7YUFDSCxNQUFBLEdBQU8sT0FBUSxDQUFBLENBQUEsQ0FBZixHQUFrQixNQUFsQixHQUF1QixDQUFDLE9BQUEsQ0FBUSxPQUFRLENBQUEsQ0FBQSxDQUFoQixDQUFELENBQXZCLEdBQTRDLElBRHpDO0tBQUEsTUFFQSxJQUFHLE9BQVEsQ0FBQSxDQUFBLENBQVIsS0FBYyxNQUFqQjtNQUNILElBQUEsR0FBTyxPQUFRLENBQUEsQ0FBQSxDQUFFLENBQUMsSUFBWCxDQUFnQixJQUFoQjtNQUNQLElBQUEsR0FBTyxDQUFDLENBQUMsS0FBRixDQUFRLE9BQVIsQ0FBZ0IsQ0FBQyxJQUFqQixDQUFzQixDQUF0QixDQUF3QixDQUFDLEdBQXpCLENBQTZCLE9BQTdCLENBQXFDLENBQUMsS0FBdEMsQ0FBQTthQUNQLFlBQUEsR0FBYSxJQUFiLEdBQWtCLGFBQWxCLEdBQStCLElBQS9CLEdBQW9DLE1BSGpDO0tBQUEsTUFJQSxJQUFHLE9BQVEsQ0FBQSxDQUFBLENBQVIsS0FBYyxHQUFqQjthQUNILEdBQUEsR0FBSSxPQUFRLENBQUEsQ0FBQSxDQUFaLEdBQWUsT0FBZixHQUFzQixPQUFRLENBQUEsQ0FBQSxDQUE5QixHQUFpQyxJQUQ5QjtLQUFBLE1BQUE7TUFHSCxPQUFBLEdBQVUsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxPQUFSLENBQWdCLENBQUMsSUFBakIsQ0FBQSxDQUF1QixDQUFDLEdBQXhCLENBQTRCLE9BQTVCLENBQW9DLENBQUMsS0FBckMsQ0FBQTthQUNQLE9BQVEsQ0FBQSxDQUFBLENBQVQsR0FBWSxHQUFaLEdBQWUsT0FBZixHQUF1QixJQUp0Qjs7RUFiRzs7RUFxQlYsTUFBQSxHQUFTLFNBQUMsR0FBRCxFQUFNLENBQU4sRUFBUyxDQUFULEVBQVksTUFBWixFQUFvQixVQUFwQixFQUFnQyxVQUFoQztBQUNQLFFBQUE7SUFBQSxJQUFHLENBQUMsQ0FBQyxRQUFGLENBQVcsR0FBWCxDQUFIO01BQ0UsR0FBQSxHQUFNLElBQUksS0FBSixDQUFVLEdBQVYsRUFBZSxDQUFmLEVBQWtCLENBQWxCLEVBQXFCLFVBQXJCO01BQ04sTUFBTSxDQUFDLElBQVAsQ0FBWSxHQUFaO0FBQ0EsYUFBTyxJQUFJLEtBQUosQ0FBVSxHQUFWLEVBQWUsVUFBZixFQUEyQixHQUEzQixFQUhUO0tBQUEsTUFBQTtNQUtFLFVBQUEsR0FBYSxJQUFJLEtBQUosQ0FBVSxHQUFWLEVBQWUsQ0FBZixFQUFrQixDQUFsQixFQUFxQixVQUFyQjtNQUNiLE1BQU0sQ0FBQyxJQUFQLENBQVksVUFBWjtNQUNBLGVBQUEsR0FBa0IsTUFBTSxDQUFDLE1BQVAsR0FBZ0I7TUFDbEMsS0FBQSxHQUFRLElBQUksS0FBSixDQUFVLEVBQVYsRUFBYyxVQUFkLEVBQTBCLEdBQTFCO01BQ1IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxHQUFQLEVBQVksU0FBQyxDQUFEO0FBQ1YsWUFBQTtRQUFBLFNBQUEsR0FBWSxDQUFDLENBQUMsSUFBRixDQUFPLE1BQVA7ZUFDWixNQUFBLENBQU8sQ0FBUCxFQUFVLEVBQUUsQ0FBQyxNQUFILENBQVUsU0FBVixDQUFWLEVBQWdDLENBQWhDLEVBQW1DLE1BQW5DLEVBQTJDLEtBQTNDLEVBQWtELFVBQWxEO01BRlUsQ0FBWjtNQUdBLFNBQUEsR0FBWSxDQUFDLENBQUMsSUFBRixDQUFPLE1BQVA7TUFDWixXQUFBLEdBQWMsSUFBSSxLQUFKLENBQVUsR0FBVixFQUFlLEVBQUUsQ0FBQyxNQUFILENBQVUsU0FBVixDQUFmLEVBQXFDLENBQXJDLEVBQXdDLFVBQXhDO01BQ2QsTUFBTSxDQUFDLElBQVAsQ0FBWSxXQUFaO01BQ0EsS0FBSyxDQUFDLE1BQU4sR0FBZSxNQUFNLENBQUMsS0FBUCxDQUFhLGVBQWI7QUFDZixhQUFPLE1BaEJUOztFQURPOztFQXNCVCxJQUFBLEdBQU8sU0FBQyxJQUFELEVBQU8sUUFBUDtBQUNMLFFBQUE7SUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLGdCQUFaLEVBQThCLElBQUksQ0FBQyxRQUFMLENBQUEsQ0FBOUI7SUFDQSxzQkFBQSxHQUF5QjtJQUN6QixnQkFBQSxHQUFtQjtXQUNuQixLQUFBLENBQU0sSUFBTixFQUFZLFFBQVosRUFBc0Isc0JBQXRCLEVBQThDLGdCQUE5QyxFQUFnRSxDQUFDLENBQUQsRUFBSSxDQUFKLENBQWhFO0VBSks7O0VBTVAsS0FBQSxHQUFRLFNBQUMsSUFBRCxFQUFPLFFBQVAsRUFBaUIsc0JBQWpCLEVBQXlDLGdCQUF6QyxFQUEyRCxTQUEzRDtBQUNOLFFBQUE7SUFBQSxJQUFjLFlBQWQ7QUFBQSxhQUFBOztJQUNBLElBQVUsc0JBQXVCLENBQUEsSUFBSSxDQUFDLEVBQUwsQ0FBakM7QUFBQSxhQUFBOztJQUNBLHNCQUF1QixDQUFBLElBQUksQ0FBQyxFQUFMLENBQXZCLEdBQWtDO0lBQ2xDLFlBQUEsR0FBZSxTQUFVLENBQUEsQ0FBQTtJQUN6QixXQUFBLEdBQWMsU0FBVSxDQUFBLENBQUE7SUFDeEIsUUFBQSxDQUFTLElBQVQsRUFBZSxnQkFBZixFQUFpQyxZQUFqQyxFQUErQyxXQUEvQztJQUNBLFNBQUEsR0FBZSxvQkFBSCxHQUFzQixZQUFBLEdBQWUsQ0FBckMsR0FBNEM7SUFDeEQsYUFBQSxHQUFtQixvQkFBSCxHQUFzQixZQUFBLEdBQWUsQ0FBckMsR0FBNEM7SUFDNUQsT0FBQSxHQUFhLG1CQUFILEdBQXFCLFdBQUEsR0FBYyxDQUFuQyxHQUEwQztJQUVwRCxLQUFBLENBQU0sSUFBSSxDQUFDLElBQVgsRUFBaUIsUUFBakIsRUFBMkIsc0JBQTNCLEVBQW1ELGdCQUFuRCxFQUFxRSxDQUFDLFNBQUQsRUFBWSxXQUFaLENBQXJFO0lBQ0EsS0FBQSxDQUFNLElBQUksQ0FBQyxRQUFYLEVBQXFCLFFBQXJCLEVBQStCLHNCQUEvQixFQUF1RCxnQkFBdkQsRUFBeUUsQ0FBQyxhQUFELEVBQWdCLFdBQWhCLENBQXpFO0lBQ0EsSUFBTyxxQkFBUDthQUNFLEtBQUEsQ0FBTSxJQUFJLENBQUMsTUFBWCxFQUFtQixRQUFuQixFQUE2QixzQkFBN0IsRUFBcUQsZ0JBQXJELEVBQXVFLENBQUMsQ0FBRCxFQUFJLE9BQUosQ0FBdkUsRUFERjs7RUFiTTs7RUFtQlIsR0FBQSxHQUFNLFNBQUMsT0FBRCxFQUFVLFFBQVYsRUFBb0IsS0FBcEI7QUFDSixRQUFBO0lBQUEsRUFBQSxDQUFHLE1BQUEsR0FBTyxPQUFQLEdBQWUsSUFBZixHQUFtQixRQUFuQixHQUE0QixJQUE1QixHQUFnQyxLQUFoQyxHQUFzQyxHQUF6QztJQUNBLEdBQUEsR0FBTSxRQUFRLENBQUMsR0FBVCxDQUFBO0lBQ04sSUFBRyxXQUFIO01BQ0Usc0NBQUcsQ0FBQyxDQUFDLFFBQVMsa0JBQWQ7ZUFDRSxPQUFRLENBQUEsR0FBQSxDQUFSLEdBQWUsTUFEakI7T0FBQSxNQUFBO2VBR0UsR0FBQSxDQUFJLE9BQVEsQ0FBQSxHQUFBLENBQVosRUFBa0IsUUFBbEIsRUFBNEIsS0FBNUIsRUFIRjtPQURGOztFQUhJOztFQVNOLE9BQUEsR0FBVSxTQUFDLElBQUQsRUFBTyxRQUFQO0FBQ1IsUUFBQTtJQUFBLEVBQUEsQ0FBRyxVQUFBLEdBQVcsSUFBWCxHQUFnQixJQUFoQixHQUFvQixRQUFwQixHQUE2QixHQUFoQztJQUNBLEdBQUEsR0FBTSxRQUFRLENBQUMsR0FBVCxDQUFBO0lBQ04sSUFBRyxXQUFIO2FBQ0UsT0FBQSxDQUFRLElBQUksQ0FBQyxRQUFTLENBQUEsR0FBQSxDQUF0QixFQUE0QixRQUE1QixFQURGO0tBQUEsTUFBQTthQUdFLEtBSEY7O0VBSFE7O0VBVUo7SUFDUyxnQkFBQTtNQUNYLElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBSTtNQUNsQixJQUFDLENBQUEsV0FBRCxHQUFlLElBQUksU0FBSixDQUNiO1FBQUEsSUFBQSxFQUFNLFVBQU47UUFDQSxRQUFBLEVBQVUsRUFEVjtRQUVBLFVBQUEsRUFBWSxXQUZaO1FBR0EsU0FBQSxFQUFXLE1BSFg7UUFJQSxDQUFBLEVBQUcsQ0FKSDtRQUtBLENBQUEsRUFBRyxNQUFNLENBQUMsTUFBUCxHQUFnQixDQUxuQjtRQU1BLEtBQUEsRUFBTyxNQUFNLENBQUMsS0FBUCxHQUFlLENBTnRCO1FBT0EsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLENBUHhCO1FBUUEsS0FBQSxFQUFPLE1BUlA7UUFTQSxlQUFBLEVBQWlCLFNBVGpCO1FBVUEsT0FBQSxFQUFTLEVBVlQ7UUFXQSxXQUFBLEVBQWEsTUFYYjtRQVlBLFdBQUEsRUFBYSxDQVpiO09BRGE7TUFjZixJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksU0FBSixDQUNYO1FBQUEsSUFBQSxFQUFNLFFBQU47UUFDQSxRQUFBLEVBQVUsRUFEVjtRQUVBLFVBQUEsRUFBWSxXQUZaO1FBR0EsU0FBQSxFQUFXLE1BSFg7UUFJQSxDQUFBLEVBQUcsTUFBTSxDQUFDLEtBQVAsR0FBZSxDQUpsQjtRQUtBLENBQUEsRUFBRyxNQUFNLENBQUMsTUFBUCxHQUFnQixDQUxuQjtRQU1BLEtBQUEsRUFBTyxNQUFNLENBQUMsS0FBUCxHQUFlLENBTnRCO1FBT0EsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLENBUHhCO1FBUUEsS0FBQSxFQUFPLE1BUlA7UUFTQSxlQUFBLEVBQWlCLFNBVGpCO1FBVUEsT0FBQSxFQUFTLEVBVlQ7UUFXQSxXQUFBLEVBQWEsTUFYYjtRQVlBLFdBQUEsRUFBYSxDQVpiO09BRFc7SUFoQkY7O3FCQThCYixLQUFBLEdBQU8sU0FBQyxPQUFEO01BQ0wsSUFBQyxDQUFBLE9BQUQsR0FBVztNQUNYLElBQUMsQ0FBQSxlQUFELEdBQW1CO01BQ25CLElBQUMsQ0FBQSxXQUFELEdBQWU7TUFDZixJQUFDLENBQUEsUUFBRCxHQUFZLE1BQUEsQ0FBTyxJQUFDLENBQUEsT0FBUixFQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUF1QixFQUF2QixFQUEyQixJQUEzQixFQUFpQyxJQUFDLENBQUEsVUFBbEM7TUFDWixJQUFDLENBQUEsVUFBVSxDQUFDLE1BQVosR0FBcUIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUM7TUFDekMsSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUFaLEdBQW9CLENBQUMsQ0FBQyxNQUFGLENBQVMsQ0FBQyxDQUFDLEdBQUYsQ0FBTSxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQWhCLEVBQXdCLFNBQUMsQ0FBRDtlQUFPLENBQUMsQ0FBQztNQUFULENBQXhCLENBQVQsRUFBa0QsQ0FBQyxDQUFDLEdBQXBELEVBQXlELENBQXpEO01BQ3BCLElBQUMsQ0FBQSxVQUFVLENBQUMsQ0FBWixHQUFnQixLQUFLLENBQUM7YUFDdEIsSUFBQyxDQUFBLFVBQVUsQ0FBQyxDQUFaLEdBQWdCLENBQUMsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsQ0FBakIsQ0FBQSxHQUFzQixJQUFDLENBQUEsVUFBVSxDQUFDLE1BQWxDLEdBQTJDO0lBUnREOztxQkFTUCxJQUFBLEdBQU0sU0FBQyxHQUFEO0FBQ0osVUFBQTtNQUFBLElBQUMsQ0FBQSxlQUFELEdBQW1CLENBQUMsQ0FBQyxLQUFGLENBQVEsR0FBUjtNQUNuQixPQUFBLEdBQVUsT0FBQSxDQUFRLElBQUMsQ0FBQSxRQUFULEVBQW1CLEdBQW5CO2FBQ1YsSUFBQyxDQUFBLGNBQUQsQ0FBZ0IsT0FBaEI7SUFISTs7cUJBSU4sRUFBQSxHQUFJLFNBQUMsR0FBRDtBQUNGLFVBQUE7TUFBQSxJQUFnQixDQUFDLENBQUMsS0FBRixDQUFRLElBQUMsQ0FBQSxXQUFULENBQUEsSUFBMEIsR0FBQSxLQUFTLElBQW5EO0FBQUEsZUFBTyxNQUFQOztNQUNBLFVBQUEsR0FBZ0IsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxJQUFDLENBQUEsV0FBVCxDQUFILEdBQ1gsSUFBQyxDQUFBLFFBRFUsR0FHWDtRQUNFLElBQUEsRUFBTSxJQUFDLENBQUEsV0FBVyxDQUFDLElBRHJCO1FBRUUsUUFBQSxFQUFVLElBQUMsQ0FBQSxXQUFXLENBQUMsUUFGekI7UUFHRSxDQUFBLEVBQUEsQ0FBQSxFQUFJLENBQUMsQ0FBQyxLQUFGLENBQVEsSUFBQyxDQUFBLFdBQVcsQ0FBQyxRQUFyQixDQUhOO1FBSUUsR0FBQSxFQUFLLElBQUMsQ0FBQSxXQUFXLENBQUMsTUFKcEI7T0FLRSxDQUFBLEdBQUE7TUFDSixJQUFHLGtCQUFIO1FBSUUsSUFBQyxDQUFBLGNBQUQsQ0FBZ0IsVUFBaEI7QUFDQSxlQUFPLEtBTFQ7T0FBQSxNQU1LLElBQUcsSUFBQyxDQUFBLFdBQUQsS0FBZ0IsSUFBQyxDQUFBLFFBQWpCLElBQThCLEdBQUEsS0FBTyxLQUF4QztRQUNILElBQUMsQ0FBQSxjQUFELENBQWdCLElBQWhCO0FBR0EsZUFBTyxLQUpKO09BQUEsTUFBQTtBQU1ILGVBQU8sTUFOSjs7SUFqQkg7O3FCQXdCSixjQUFBLEdBQWdCLFNBQUMsT0FBRDtNQUNkLElBQUEsQ0FBSyxJQUFDLENBQUEsUUFBTixFQUFnQixTQUFDLElBQUQsRUFBTyxnQkFBUCxFQUF5QixZQUF6QixFQUF1QyxXQUF2QztlQUF1RCxJQUFJLENBQUMsUUFBTCxDQUFjLGdCQUFkLEVBQWdDLFlBQWhDLEVBQThDLFdBQTlDO01BQXZELENBQWhCO01BQ0EsSUFBRyxlQUFIO1FBQ0UsSUFBQyxDQUFBLFdBQUQsR0FBZTtlQUNmLElBQUEsQ0FBSyxJQUFDLENBQUEsV0FBTixFQUFtQixTQUFDLElBQUQsRUFBTyxnQkFBUCxFQUF5QixZQUF6QixFQUF1QyxXQUF2QztpQkFBdUQsSUFBSSxDQUFDLE1BQUwsQ0FBWSxnQkFBWixFQUE4QixZQUE5QixFQUE0QyxXQUE1QztRQUF2RCxDQUFuQixFQUZGO09BQUEsTUFBQTtlQUlFLElBQUMsQ0FBQSxXQUFELEdBQWUsS0FKakI7O0lBRmM7O3FCQU9oQixNQUFBLEdBQVEsU0FBQTtNQUNOLElBQUcsSUFBQyxDQUFBLEVBQUQsQ0FBSSxNQUFKLENBQUg7ZUFDRSxJQUFDLENBQUEsZUFBZ0IsQ0FBQSxDQUFBLENBQWpCLElBQXVCLEVBRHpCOztJQURNOztxQkFHUixVQUFBLEdBQVksU0FBQTtNQUNWLElBQUcsSUFBQyxDQUFBLEVBQUQsQ0FBSSxVQUFKLENBQUg7ZUFDRSxJQUFDLENBQUEsZUFBZ0IsQ0FBQSxDQUFBLENBQWpCLElBQXVCLEVBRHpCOztJQURVOztxQkFHWixJQUFBLEdBQU0sU0FBQTtNQUNKLElBQUcsSUFBQyxDQUFBLEVBQUQsQ0FBSSxJQUFKLENBQUEsSUFBYSxJQUFDLENBQUEsV0FBRCxLQUFnQixJQUFDLENBQUEsUUFBakM7ZUFDRSxJQUFDLENBQUEsZUFBZSxDQUFDLE9BQWpCLENBQXlCLENBQXpCLEVBREY7O0lBREk7O3FCQUdOLEtBQUEsR0FBTyxTQUFBO01BQ0wsSUFBRyxJQUFDLENBQUEsRUFBRCxDQUFJLEtBQUosQ0FBQSxJQUFjLElBQUMsQ0FBQSxXQUFELEtBQWdCLElBQUMsQ0FBQSxRQUFsQztlQUNFLElBQUMsQ0FBQSxlQUFlLENBQUMsS0FBakIsQ0FBQSxFQURGOztJQURLOztxQkFHUCxPQUFBLEdBQVMsU0FBQTtBQUNQLFVBQUE7TUFBQSxJQUFHLHdCQUFIO1FBQ0UsY0FBQSxHQUFpQixPQUFBLENBQVEsSUFBQyxDQUFBLFdBQVcsQ0FBQyxPQUFyQjtRQUNqQixlQUFBLEdBQWtCLFFBQUEsQ0FBUyxjQUFULEVBQXlCO1VBQUUsV0FBQSxFQUFhLENBQWY7U0FBekI7UUFDbEIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLEdBQW9CO1FBQ3BCLE9BQU8sQ0FBQyxHQUFSLENBQVksYUFBWixFQUEyQixJQUFDLENBQUEsV0FBVyxDQUFDLE9BQXhDO1FBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxnQkFBWixFQUE4QixjQUE5QjtBQUNBO1VBQ0UsTUFBQSxHQUFTLElBQUEsQ0FBSyxjQUFMO1VBQ1QsSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLEdBQWtCO2lCQUNsQixPQUFPLENBQUMsR0FBUixDQUFZLGNBQVosRUFBNEIsTUFBNUIsRUFIRjtTQUFBLGNBQUE7VUFJTTtVQUNKLE9BQU8sQ0FBQyxHQUFSLENBQVksaUJBQVosRUFBK0IsS0FBL0I7aUJBQ0EsSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLEdBQWtCLEtBQUssQ0FBQyxRQUFOLENBQUEsRUFOcEI7U0FORjtPQUFBLE1BQUE7ZUFjRSxPQUFPLENBQUMsR0FBUixDQUFZLDZCQUFaLEVBZEY7O0lBRE87O3FCQWdCVCxPQUFBLEdBQVMsU0FBQTtBQUNQLFVBQUE7TUFBQSxJQUFBLEdBQU8sSUFBQyxDQUFBO01BQ1IsSUFBRyxZQUFIO1FBQ0UsS0FBQSxHQUFRLE1BQUEsQ0FBTyxXQUFBLEdBQVksSUFBWixHQUFpQixjQUF4QjtRQUNSLElBQUcsYUFBSDtVQUNFLE1BQU0sQ0FBQyxJQUFQLEdBQWMsSUFBQyxDQUFBO1VBQ2YsR0FBQSxHQUFNLENBQUMsQ0FBQyxLQUFGLENBQVEsSUFBQyxDQUFBLGVBQVQ7VUFDTixHQUFBLENBQUksSUFBQyxDQUFBLE9BQUwsRUFBYyxDQUFDLENBQUMsS0FBRixDQUFRLEdBQVIsQ0FBZCxFQUE0QixLQUE1QjtVQUNBLEVBQUEsQ0FBRyxtQkFBSCxFQUF3QixHQUF4QjtVQUNBLElBQUMsQ0FBQSxLQUFELENBQU8sSUFBQyxDQUFBLE9BQVI7VUFDQSxJQUFDLENBQUEsSUFBRCxDQUFNLENBQUMsQ0FBQyxLQUFGLENBQVEsR0FBUixDQUFOO2lCQUNBLEVBQUEsQ0FBRyxJQUFDLENBQUEsT0FBSixFQVBGO1NBRkY7O0lBRk87Ozs7OztFQWFYLE1BQUEsR0FBUyxJQUFJOztFQUViLE1BQU0sQ0FBQyxLQUFQLENBQWEsQ0FDWCxJQURXLEVBRVgsQ0FBQyxLQUFELEVBQVEsTUFBUixFQUFnQixJQUFoQixDQUZXLEVBR1gsQ0FBQyxLQUFELEVBQVEsUUFBUixFQUNFLENBQUMsTUFBRCxFQUFTLENBQUMsR0FBRCxDQUFULEVBQWdCLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLENBQWhCLENBREYsQ0FIVyxFQUtYLENBQUMsUUFBRCxFQUFXLE1BQVgsQ0FMVyxDQUFiOztFQVFBLEdBQUEsR0FDRTtJQUFBLENBQUEsRUFBRyxFQUFIO0lBQ0EsQ0FBQSxFQUFHLEVBREg7SUFFQSxDQUFBLEVBQUcsRUFGSDtJQUdBLENBQUEsRUFBRyxFQUhIO0lBSUEsQ0FBQSxFQUFHLEVBSkg7SUFLQSxDQUFBLEVBQUcsRUFMSDtJQU1BLEtBQUEsRUFBTyxFQU5QO0lBT0EsS0FBQSxFQUFPLEVBUFA7SUFRQSxLQUFBLEVBQU8sRUFSUDs7O0VBVUYsYUFBQSxHQUNFO0lBQUEsS0FBQSxFQUFPLEdBQUcsQ0FBQyxDQUFYO0lBQ0EsTUFBQSxFQUFRLEdBQUcsQ0FBQyxDQURaO0lBRUEsV0FBQSxFQUFhLEdBQUcsQ0FBQyxDQUZqQjtJQUdBLE9BQUEsRUFBUyxHQUFHLENBQUMsQ0FIYjtJQUlBLE9BQUEsRUFBUyxHQUFHLENBQUMsS0FKYjtJQUtBLE9BQUEsRUFBUyxHQUFHLENBQUMsQ0FMYjs7O0VBT0k7SUFDUyxvQkFBQyxPQUFEO01BQUMsSUFBQyxDQUFBLFNBQUQ7TUFDWixJQUFDLENBQUEsTUFBRCxHQUFVO01BQ1YsTUFBTSxDQUFDLElBQVAsQ0FBWSxNQUFaLENBQW1CLENBQUMsZ0JBQXBCLENBQXFDLE9BQXJDLEVBQThDLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxLQUFEO1VBQzVDLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWixFQUFzQixLQUFLLENBQUMsT0FBNUI7aUJBQ0EsT0FBTyxLQUFDLENBQUEsTUFBTyxDQUFBLEtBQUssQ0FBQyxPQUFOO1FBRjZCO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE5QztNQUdBLE1BQU0sQ0FBQyxJQUFQLENBQVksTUFBWixDQUFtQixDQUFDLGdCQUFwQixDQUFxQyxTQUFyQyxFQUFnRCxDQUFBLFNBQUEsS0FBQTtlQUFBLFNBQUMsS0FBRDtBQUM5QyxjQUFBO1VBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxVQUFaLEVBQXdCLEtBQUssQ0FBQyxPQUE5QjtVQUNBLE9BQUEsR0FBVSxDQUFDLENBQUMsS0FBRixDQUFRLE1BQU0sQ0FBQyxlQUFmO1VBQ1YsS0FBQyxDQUFBLE1BQU8sQ0FBQSxLQUFLLENBQUMsT0FBTixDQUFSLEdBQXlCO1VBQ3pCLElBQUcsS0FBSyxDQUFDLE9BQU4sS0FBaUIsYUFBYSxDQUFDLEtBQWxDO1lBQ0UsS0FBQyxDQUFBLE1BQU0sQ0FBQyxJQUFSLENBQUEsRUFERjs7VUFFQSxJQUFHLEtBQUssQ0FBQyxPQUFOLEtBQWlCLGFBQWEsQ0FBQyxNQUFsQztZQUNFLEtBQUMsQ0FBQSxNQUFNLENBQUMsS0FBUixDQUFBLEVBREY7O1VBRUEsSUFBRyxLQUFLLENBQUMsT0FBTixLQUFpQixhQUFhLENBQUMsT0FBbEM7WUFDRSxLQUFDLENBQUEsTUFBTSxDQUFDLE1BQVIsQ0FBQSxFQURGOztVQUVBLElBQUcsS0FBSyxDQUFDLE9BQU4sS0FBaUIsYUFBYSxDQUFDLFdBQWxDO1lBQ0UsS0FBQyxDQUFBLE1BQU0sQ0FBQyxVQUFSLENBQUEsRUFERjs7VUFFQSxJQUFHLEtBQUssQ0FBQyxPQUFOLEtBQWlCLGFBQWEsQ0FBQyxPQUFsQztZQUNFLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixDQUFBLEVBREY7O1VBRUEsSUFBRyxLQUFLLENBQUMsT0FBTixLQUFpQixhQUFhLENBQUMsT0FBbEM7WUFDRSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBQSxFQURGOztpQkFFQSxFQUFBLENBQUcsT0FBQSxHQUFRLE9BQVIsR0FBZ0IsTUFBaEIsR0FBc0IsTUFBTSxDQUFDLGVBQWhDO1FBaEI4QztNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBaEQ7SUFMVzs7Ozs7O0VBdUJmLFVBQUEsR0FBYSxJQUFJLFVBQUosQ0FBZSxNQUFmOztFQUViLE9BQU8sQ0FBQyxHQUFSLENBQVksWUFBWjtBQTVXQSIsInNvdXJjZXNDb250ZW50IjpbIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbXBvcnRzXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbl9fID0gcmVxdWlyZSAnLi91dGlscydcbmJlYXV0aWZ5ID0gcmVxdWlyZSgnanMtYmVhdXRpZnknKS5qc19iZWF1dGlmeVxuUGFyc2VyID0gcmVxdWlyZSAnLi9wYXJzZXInXG5cbmluY29uc29sYXRhID0gVXRpbHMubG9hZFdlYkZvbnQoXCJJbmNvbnNvbGF0YVwiKVxuXG5QYXJzZXIudGVzdCgpXG5cbmxnID0gY29uc29sZS5sb2dcblxuY2xhc3MgU0V4cHJlc3Npb25cbiAgY29uc3RydWN0b3I6IChAdG9rZW5zLCBAcGFyZW50LCBAcHJvZ3JhbSkgLT5cbiAgICBAaWQgPSBfLnVuaXF1ZUlkKCdzZXhwXycpXG4gICAgQGNoaWxkcmVuID0gW11cbiAgICBAcHJldmlvdXMgPSBudWxsXG4gICAgQG5leHQgPSBudWxsXG4gICAgaWYgbm90IF8uaXNOaWwoQHBhcmVudClcbiAgICAgIGlmIG5vdCBfLmlzRW1wdHkoQHBhcmVudC5jaGlsZHJlbilcbiAgICAgICAgc2libGluZyA9IF8ubGFzdChAcGFyZW50LmNoaWxkcmVuKVxuICAgICAgICBAcHJldmlvdXMgPSBzaWJsaW5nXG4gICAgICAgIHNpYmxpbmcubmV4dCA9IHRoaXNcbiAgICAgIEBwYXJlbnQuY2hpbGRyZW4ucHVzaCh0aGlzKVxuICB0b1N0cmluZzogKCkgLT5cbiAgICBpZiBAdG9rZW5zPyB0aGVuIEB0b2tlbnMubWFwKCh0KSAtPiB0LnRleHQpLmpvaW4oJyAnKSBlbHNlIFwiTlVMTFwiXG4gIHNlbGVjdDogKHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpIC0+XG4gICAgXy5lYWNoIEB0b2tlbnMsICh0b2tlbikgLT5cbiAgICAgIGlmIG5vdCB2aXNpdGVkVG9rZW5CeUlkW3Rva2VuLmlkXVxuICAgICAgICB2aXNpdGVkVG9rZW5CeUlkW3Rva2VuLmlkXSA9IHRydWVcbiAgICAgICAgdG9rZW4uc2VsZWN0KHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpXG4gIGRlc2VsZWN0OiAodmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT5cbiAgICBfLmVhY2ggQHRva2VucywgKHRva2VuKSAtPlxuICAgICAgaWYgbm90IHZpc2l0ZWRUb2tlbkJ5SWRbdG9rZW4uaWRdXG4gICAgICAgIHZpc2l0ZWRUb2tlbkJ5SWRbdG9rZW4uaWRdID0gdHJ1ZVxuICAgICAgICB0b2tlbi5kZXNlbGVjdCgpXG5cbmNsYXNzIFNBdG9tIGV4dGVuZHMgU0V4cHJlc3Npb25cbiAgY29uc3RydWN0b3I6ICh0b2tlbiwgcGFyZW50LCBwcm9ncmFtKSAtPlxuICAgIEBpc0F0b20gPSB0cnVlXG4gICAgQGlzTGlzdCA9IGZhbHNlXG4gICAgc3VwZXIgW3Rva2VuXSwgcGFyZW50LCBwcm9ncmFtXG5cbmNsYXNzIFNMaXN0IGV4dGVuZHMgU0V4cHJlc3Npb25cbiAgY29uc3RydWN0b3I6ICh0b2tlbnMsIHBhcmVudCwgcHJvZ3JhbSkgLT5cbiAgICBAaXNBdG9tID0gZmFsc2VcbiAgICBAaXNMaXN0ID0gdHJ1ZVxuICAgIHN1cGVyIHRva2VucywgcGFyZW50LCBwcm9ncmFtXG5cbmNsYXNzIFRva2VuIGV4dGVuZHMgVGV4dExheWVyXG4gIEJBQ0tHUk9VTkRfQ09MT1JfREVTRUxFQ1RFRDogJyNGRkZGRkYnXG4gIFRFWFRfQ09MT1JfREVTRUxFQ1RFRDogJyNBQUEnXG4gIEJBQ0tHUk9VTkRfQ09MT1JfU0VMRUNURUQ6ICcjRjhGOEY4J1xuICBURVhUX0NPTE9SX1NFTEVDVEVEOiAnIzAwMDAwMCdcbiAgY29uc3RydWN0b3I6ICh0eHQsIHgsIHksIHRva2VuR3JvdXApIC0+XG4gICAgc3VwZXJcbiAgICAgIHBhcmVudDogdG9rZW5Hcm91cFxuICAgICAgdGV4dDogdHh0XG4gICAgICBmb250U2l6ZTogMTJcbiAgICAgIGZvbnRGYW1pbHk6IGluY29uc29sYXRhXG4gICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gICAgICB4OiB4XG4gICAgICB5OiB5XG4gICAgICBjb2xvcjogQFRFWFRfQ09MT1JfREVTRUxFQ1RFRFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBAQkFDS0dST1VORF9DT0xPUl9ERVNFTEVDVEVEXG4gICAgICBwYWRkaW5nOiAxMFxuICBzZWxlY3Q6IChzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KSAtPlxuICAgICMgY29uc29sZS5sb2cgXCInI3tAdGV4dH0nXFxuXFx0LS0+XFx0KCN7c2libGluZ0luZGV4fSwgI3twYXJlbnRJbmRleH0pXCJcbiAgICBpZiBzaWJsaW5nSW5kZXggPT0gMCAmJiBwYXJlbnRJbmRleCA9PSAwXG4gICAgICBAYmFja2dyb3VuZENvbG9yID0gJyMwMDAnXG4gICAgICBAY29sb3IgPSAnI0ZGRidcbiAgICBlbHNlIGlmIHNpYmxpbmdJbmRleCA9PSAwICYmIHBhcmVudEluZGV4ID09IC0xXG4gICAgICBAYmFja2dyb3VuZENvbG9yID0gJyM1NTUnXG4gICAgICBAY29sb3IgPSAnI0FBQSdcbiAgICAgIEBmb250V2VpZ2h0ID0gJ2JvbGQnXG4gICAgZWxzZSBpZiBzaWJsaW5nSW5kZXggIT0gMCAmJiBwYXJlbnRJbmRleCA9PSAwXG4gICAgICBAYmFja2dyb3VuZENvbG9yID0gJyNGMkYyRjInXG4gICAgICBAY29sb3IgPSAnIzAwMCdcbiAgICBlbHNlXG4gICAgICBAYmFja2dyb3VuZENvbG9yID0gJyNGRkYnXG4gICAgICBAY29sb3IgPSAnI0JCQidcbiAgZGVzZWxlY3Q6ICgpIC0+XG4gICAgQGJhY2tncm91bmRDb2xvciA9IEBCQUNLR1JPVU5EX0NPTE9SX0RFU0VMRUNURURcbiAgICBAY29sb3IgPSBAVEVYVF9DT0xPUl9ERVNFTEVDVEVEXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIEVWQUxVQVRFXG4jIHdvcmsgaW4gcHJvZ3Jlc3NcbmV2YWx1YXRlID0gKHNleHApIC0+XG4gIHJldHVybiBzZXhwIHVubGVzcyBfLmlzQXJyYXkoc2V4cCkgJiYgc2V4cC5sZW5ndGggPiAwXG4gIG9wZXJhdG9yID0gXy5oZWFkKHNleHApXG4gIGFyZ3MgPSBfLnRhaWwoc2V4cClcbiAgaWYgb3BlcmF0b3IgaXMgJ3F1b3RlJ1xuICAgIGlmIGFyZ3MubGVuZ3RoID09IDFcbiAgICAgIHJldHVybiBhcmdzWzBdXG4gICAgZWxzZVxuICAgICAgcmV0dXJuIFwiRVJST1I6IHdyb25nIG51bWJlcnMgb2YgYXJndW1lbnRzXCJcbiAgaWYgb3BlcmF0b3IgaXMgJ2F0b20nXG4gICAgaWYgYXJncy5sZW5ndGggPT0gMVxuICAgICAgdGhpbmcgPSBldmFsdWF0ZShhcmdzWzBdKVxuICAgICAgcmV0dXJuIGlmIChfLmlzQXJyYXkodGhpbmcpIGFuZCBfLmlzRW1wdHkodGhpbmcpKSBvciBfLmlzU3RyaW5nKHRoaW5nKSB0aGVuICd0JyBlbHNlIFtdXG4gICAgZWxzZVxuICAgICAgcmV0dXJuIFwiRVJST1I6IHdyb25nIG51bWJlcnMgb2YgYXJndW1lbnRzXCJcblxud2luZG93LmV2YWx1YXRlID0gZXZhbHVhdGVcblxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgUkVOREVSXG5jb21waWxlID0gKHByb2dyYW0pIC0+XG4gIHJldHVybiBwcm9ncmFtIHVubGVzcyBfLmlzQXJyYXkocHJvZ3JhbSlcbiAgaWYgXy5maXJzdChwcm9ncmFtKSA9PSAnZG8nXG4gICAgZXhwcyA9IF8uY2hhaW4ocHJvZ3JhbSkuZHJvcCgxKS5tYXAoY29tcGlsZSkudmFsdWUoKVxuICAgIGJvZHkgPSBfLmRyb3BSaWdodChleHBzKS5jb25jYXQoXCJyZXR1cm4gI3tfLmxhc3QoZXhwcyl9O1wiKVxuICAgIGJvZHlTdHIgPSBib2R5LmpvaW4oXCI7XFxuXCIpXG4gICAgXCIoZnVuY3Rpb24gKCkgeyAje2JvZHlTdHJ9IH0pKClcIlxuICBlbHNlIGlmIF8uZmlyc3QocHJvZ3JhbSkgPT0gJ3ZhcidcbiAgICBcInZhciAje3Byb2dyYW1bMV19ID0gKCN7Y29tcGlsZShwcm9ncmFtWzJdKX0pXCJcbiAgZWxzZSBpZiBwcm9ncmFtWzBdID09ICdmdW5jJ1xuICAgIGFyZ3MgPSBwcm9ncmFtWzFdLmpvaW4oJywgJylcbiAgICByZXN0ID0gXy5jaGFpbihwcm9ncmFtKS5kcm9wKDIpLm1hcChjb21waWxlKS52YWx1ZSgpXG4gICAgXCJmdW5jdGlvbiAoI3thcmdzfSkgeyByZXR1cm4gI3tyZXN0fTsgfVwiXG4gIGVsc2UgaWYgcHJvZ3JhbVswXSA9PSAnKidcbiAgICBcIigje3Byb2dyYW1bMV19KSAqICgje3Byb2dyYW1bMl19KVwiXG4gIGVsc2VcbiAgICBhcmdsaXN0ID0gXy5jaGFpbihwcm9ncmFtKS50YWlsKCkubWFwKGNvbXBpbGUpLnZhbHVlKClcbiAgICBcIiN7cHJvZ3JhbVswXX0oI3thcmdsaXN0fSlcIlxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBSRU5ERVJcbnJlbmRlciA9IChleHAsIHgsIHksIHRva2VucywgcGFyZW50U0V4cCwgdG9rZW5Hcm91cCkgLT5cbiAgaWYgXy5pc1N0cmluZyhleHApXG4gICAgc3RyID0gbmV3IFRva2VuKGV4cCwgeCwgeSwgdG9rZW5Hcm91cClcbiAgICB0b2tlbnMucHVzaChzdHIpXG4gICAgcmV0dXJuIG5ldyBTQXRvbShzdHIsIHBhcmVudFNFeHAsIGV4cClcbiAgZWxzZVxuICAgIGxlZnRQYXJlbnMgPSBuZXcgVG9rZW4oXCIoXCIsIHgsIHksIHRva2VuR3JvdXApXG4gICAgdG9rZW5zLnB1c2gobGVmdFBhcmVucylcbiAgICBsZWZ0UGFyZW5zSW5kZXggPSB0b2tlbnMubGVuZ3RoIC0gMVxuICAgIHNsaXN0ID0gbmV3IFNMaXN0KFtdLCBwYXJlbnRTRXhwLCBleHApXG4gICAgXy5lYWNoIGV4cCwgKGUpIC0+XG4gICAgICBsYXN0VG9rZW4gPSBfLmxhc3QodG9rZW5zKVxuICAgICAgcmVuZGVyKGUsIF9fLnhSaWdodChsYXN0VG9rZW4pLCB5LCB0b2tlbnMsIHNsaXN0LCB0b2tlbkdyb3VwKVxuICAgIGxhc3RUb2tlbiA9IF8ubGFzdCh0b2tlbnMpXG4gICAgcmlnaHRQYXJlbnMgPSBuZXcgVG9rZW4oXCIpXCIsIF9fLnhSaWdodChsYXN0VG9rZW4pLCB5LCB0b2tlbkdyb3VwKVxuICAgIHRva2Vucy5wdXNoKHJpZ2h0UGFyZW5zKVxuICAgIHNsaXN0LnRva2VucyA9IHRva2Vucy5zbGljZShsZWZ0UGFyZW5zSW5kZXgpXG4gICAgcmV0dXJuIHNsaXN0XG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFdBTEtcbiMgICBUT0RPOiByZW1vdmUgdGhlc2UgdmFyaWFibGVzIGZyb20gdGhlIGZ1bmN0aW9uIGhlYWRlcjogdmlzaXRlZFNFeHByZXNzaW9uQnlJZCB2aXNpdGVkVG9rZW5CeUlkXG53YWxrID0gKHNleHAsIGNhbGxiYWNrKSAtPlxuICBjb25zb2xlLmxvZyBcIndhbGtpbmcgZnJvbTogXCIsIHNleHAudG9TdHJpbmcoKVxuICB2aXNpdGVkU0V4cHJlc3Npb25CeUlkID0ge31cbiAgdmlzaXRlZFRva2VuQnlJZCA9IHt9XG4gIF93YWxrKHNleHAsIGNhbGxiYWNrLCB2aXNpdGVkU0V4cHJlc3Npb25CeUlkLCB2aXNpdGVkVG9rZW5CeUlkLCBbMCwgMF0pXG5cbl93YWxrID0gKHNleHAsIGNhbGxiYWNrLCB2aXNpdGVkU0V4cHJlc3Npb25CeUlkLCB2aXNpdGVkVG9rZW5CeUlkLCBpbmRleFBhaXIpIC0+XG4gIHJldHVybiB1bmxlc3Mgc2V4cD9cbiAgcmV0dXJuIGlmIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWRbc2V4cC5pZF1cbiAgdmlzaXRlZFNFeHByZXNzaW9uQnlJZFtzZXhwLmlkXSA9IHRydWVcbiAgc2libGluZ0luZGV4ID0gaW5kZXhQYWlyWzBdXG4gIHBhcmVudEluZGV4ID0gaW5kZXhQYWlyWzFdXG4gIGNhbGxiYWNrKHNleHAsIHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpXG4gIG5leHRJbmRleCA9IGlmIHNpYmxpbmdJbmRleD8gdGhlbiBzaWJsaW5nSW5kZXggKyAxIGVsc2UgbnVsbFxuICBwcmV2aW91c0luZGV4ID0gaWYgc2libGluZ0luZGV4PyB0aGVuIHNpYmxpbmdJbmRleCAtIDEgZWxzZSBudWxsXG4gIHVwSW5kZXggPSBpZiBwYXJlbnRJbmRleD8gdGhlbiBwYXJlbnRJbmRleCAtIDEgZWxzZSBudWxsXG4gICMgZG93bkluZGV4ID0gaWYgcGFyZW50SW5kZXg/IHRoZW4gcGFyZW50SW5kZXggKyAxIGVsc2UgbnVsbFxuICBfd2FsayhzZXhwLm5leHQsIGNhbGxiYWNrLCB2aXNpdGVkU0V4cHJlc3Npb25CeUlkLCB2aXNpdGVkVG9rZW5CeUlkLCBbbmV4dEluZGV4LCBwYXJlbnRJbmRleF0pXG4gIF93YWxrKHNleHAucHJldmlvdXMsIGNhbGxiYWNrLCB2aXNpdGVkU0V4cHJlc3Npb25CeUlkLCB2aXNpdGVkVG9rZW5CeUlkLCBbcHJldmlvdXNJbmRleCwgcGFyZW50SW5kZXhdKVxuICBpZiBub3Qgc2V4cC5wcmV2aW91cz9cbiAgICBfd2FsayhzZXhwLnBhcmVudCwgY2FsbGJhY2ssIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWQsIHZpc2l0ZWRUb2tlbkJ5SWQsIFswLCB1cEluZGV4XSlcbiAgIyBfd2FsayhfLmZpcnN0KHNleHAuY2hpbGRyZW4pLCBjYWxsYmFjaywgdmlzaXRlZCwgW251bGwsIGRvd25JbmRleF0pXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIENPREUgRURJVElPTlxuc2V0ID0gKHByb2dyYW0sIHBvc2l0aW9uLCB2YWx1ZSkgLT5cbiAgbGcgXCJzZXQoI3twcm9ncmFtfSwgI3twb3NpdGlvbn0sICN7dmFsdWV9KVwiXG4gIGlkeCA9IHBvc2l0aW9uLnBvcCgpXG4gIGlmIGlkeD9cbiAgICBpZiBfLmlzRW1wdHk/IHBvc2l0aW9uXG4gICAgICBwcm9ncmFtW2lkeF0gPSB2YWx1ZVxuICAgIGVsc2VcbiAgICAgIHNldChwcm9ncmFtW2lkeF0sIHBvc2l0aW9uLCB2YWx1ZSlcblxuZ2V0U2V4cCA9IChzZXhwLCBwb3NpdGlvbikgLT5cbiAgbGcgXCJnZXRTZXhwPCN7c2V4cH0+PCN7cG9zaXRpb259PlwiXG4gIGlkeCA9IHBvc2l0aW9uLnBvcCgpXG4gIGlmIGlkeD9cbiAgICBnZXRTZXhwKHNleHAuY2hpbGRyZW5baWR4XSwgcG9zaXRpb24pXG4gIGVsc2VcbiAgICBzZXhwXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIEVESVRPUlxuY2xhc3MgRWRpdG9yXG4gIGNvbnN0cnVjdG9yOiAoKSAtPlxuICAgIEB0b2tlbkdyb3VwID0gbmV3IExheWVyXG4gICAgQGNvbXBpbGVkQm94ID0gbmV3IFRleHRMYXllclxuICAgICAgdGV4dDogJ2NvbXBpbGVkJ1xuICAgICAgZm9udFNpemU6IDEzXG4gICAgICBmb250RmFtaWx5OiBpbmNvbnNvbGF0YVxuICAgICAgdGV4dEFsaWduOiAnbGVmdCdcbiAgICAgIHg6IDBcbiAgICAgIHk6IFNjcmVlbi5oZWlnaHQgLyAyXG4gICAgICB3aWR0aDogU2NyZWVuLndpZHRoIC8gMlxuICAgICAgaGVpZ2h0OiBTY3JlZW4uaGVpZ2h0IC8gMlxuICAgICAgY29sb3I6ICcjMDAwJ1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0Y2RjZGNidcbiAgICAgIHBhZGRpbmc6IDEwXG4gICAgICBib3JkZXJDb2xvcjogJyMwMDAnXG4gICAgICBib3JkZXJXaWR0aDogMVxuICAgIEBvdXRwdXRCb3ggPSBuZXcgVGV4dExheWVyXG4gICAgICB0ZXh0OiAnb3V0cHV0J1xuICAgICAgZm9udFNpemU6IDEzXG4gICAgICBmb250RmFtaWx5OiBpbmNvbnNvbGF0YVxuICAgICAgdGV4dEFsaWduOiAnbGVmdCdcbiAgICAgIHg6IFNjcmVlbi53aWR0aCAvIDJcbiAgICAgIHk6IFNjcmVlbi5oZWlnaHQgLyAyXG4gICAgICB3aWR0aDogU2NyZWVuLndpZHRoIC8gMlxuICAgICAgaGVpZ2h0OiBTY3JlZW4uaGVpZ2h0IC8gMlxuICAgICAgY29sb3I6ICcjMDAwJ1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0Y2RjZGNidcbiAgICAgIHBhZGRpbmc6IDEwXG4gICAgICBib3JkZXJDb2xvcjogJyMwMDAnXG4gICAgICBib3JkZXJXaWR0aDogMVxuICBidWlsZDogKHByb2dyYW0pIC0+XG4gICAgQHByb2dyYW0gPSBwcm9ncmFtXG4gICAgQGN1cnJlbnRQb3NpdGlvbiA9IFtdXG4gICAgQGN1cnJlbnRTRXhwID0gbnVsbFxuICAgIEByb290U0V4cCA9IHJlbmRlciBAcHJvZ3JhbSwgMCwgMCwgW10sIG51bGwsIEB0b2tlbkdyb3VwXG4gICAgQHRva2VuR3JvdXAuaGVpZ2h0ID0gQHJvb3RTRXhwLnRva2Vuc1swXS5oZWlnaHRcbiAgICBAdG9rZW5Hcm91cC53aWR0aCA9IF8ucmVkdWNlKF8ubWFwKEByb290U0V4cC50b2tlbnMsICh0KSAtPiB0LndpZHRoKSwgXy5hZGQsIDApXG4gICAgQHRva2VuR3JvdXAueCA9IEFsaWduLmNlbnRlclxuICAgIEB0b2tlbkdyb3VwLnkgPSAoU2NyZWVuLmhlaWdodCAvIDIpIC0gQHRva2VuR3JvdXAuaGVpZ2h0IC0gMTBcbiAganVtcDogKHBvcykgLT5cbiAgICBAY3VycmVudFBvc2l0aW9uID0gXy5jbG9uZShwb3MpXG4gICAgbmV3U2V4cCA9IGdldFNleHAoQHJvb3RTRXhwLCBwb3MpXG4gICAgQHNldEN1cnJlbnRTRXhwKG5ld1NleHApXG4gIGdvOiAoZGlyKSAtPlxuICAgIHJldHVybiBmYWxzZSBpZiBfLmlzTmlsKEBjdXJyZW50U0V4cCkgYW5kIGRpciBpc250ICdpbidcbiAgICB0YXJnZXRTRXhwID0gaWYgXy5pc05pbChAY3VycmVudFNFeHApXG4gICAgICBAcm9vdFNFeHBcbiAgICBlbHNlXG4gICAgICB7XG4gICAgICAgIG5leHQ6IEBjdXJyZW50U0V4cC5uZXh0XG4gICAgICAgIHByZXZpb3VzOiBAY3VycmVudFNFeHAucHJldmlvdXNcbiAgICAgICAgaW46IF8uZmlyc3QoQGN1cnJlbnRTRXhwLmNoaWxkcmVuKVxuICAgICAgICBvdXQ6IEBjdXJyZW50U0V4cC5wYXJlbnRcbiAgICAgIH1bZGlyXVxuICAgIGlmIHRhcmdldFNFeHA/XG4gICAgICAjIHdhbGsgQHJvb3RTRXhwLCAoc2V4cCwgdmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT4gc2V4cC5kZXNlbGVjdCh2aXNpdGVkVG9rZW5CeUlkLCBzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KVxuICAgICAgIyBAY3VycmVudFNFeHAgPSB0YXJnZXRTRXhwXG4gICAgICAjIHdhbGsgQGN1cnJlbnRTRXhwLCAoc2V4cCwgdmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT4gc2V4cC5zZWxlY3QodmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleClcbiAgICAgIEBzZXRDdXJyZW50U0V4cCh0YXJnZXRTRXhwKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICBlbHNlIGlmIEBjdXJyZW50U0V4cCA9PSBAcm9vdFNFeHAgYW5kIGRpciA9PSAnb3V0J1xuICAgICAgQHNldEN1cnJlbnRTRXhwKG51bGwpXG4gICAgICAjIHdhbGsgQHJvb3RTRXhwLCAoc2V4cCwgdmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT4gc2V4cC5kZXNlbGVjdCh2aXNpdGVkVG9rZW5CeUlkLCBzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KVxuICAgICAgIyBAY3VycmVudFNFeHAgPSBudWxsXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuICBzZXRDdXJyZW50U0V4cDogKG5ld1NleHApIC0+XG4gICAgd2FsayBAcm9vdFNFeHAsIChzZXhwLCB2aXNpdGVkVG9rZW5CeUlkLCBzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KSAtPiBzZXhwLmRlc2VsZWN0KHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpXG4gICAgaWYgbmV3U2V4cD9cbiAgICAgIEBjdXJyZW50U0V4cCA9IG5ld1NleHBcbiAgICAgIHdhbGsgQGN1cnJlbnRTRXhwLCAoc2V4cCwgdmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT4gc2V4cC5zZWxlY3QodmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleClcbiAgICBlbHNlXG4gICAgICBAY3VycmVudFNFeHAgPSBudWxsXG4gIGdvTmV4dDogKCkgLT5cbiAgICBpZiBAZ28oJ25leHQnKVxuICAgICAgQGN1cnJlbnRQb3NpdGlvblswXSArPSAxXG4gIGdvUHJldmlvdXM6ICgpIC0+XG4gICAgaWYgQGdvKCdwcmV2aW91cycpXG4gICAgICBAY3VycmVudFBvc2l0aW9uWzBdIC09IDFcbiAgZ29JbjogKCkgLT5cbiAgICBpZiBAZ28oJ2luJykgJiYgQGN1cnJlbnRTRXhwICE9IEByb290U0V4cFxuICAgICAgQGN1cnJlbnRQb3NpdGlvbi51bnNoaWZ0KDApXG4gIGdvT3V0OiAoKSAtPlxuICAgIGlmIEBnbygnb3V0JykgJiYgQGN1cnJlbnRTRXhwICE9IEByb290U0V4cFxuICAgICAgQGN1cnJlbnRQb3NpdGlvbi5zaGlmdCgpXG4gIGNvbXBpbGU6ICgpIC0+XG4gICAgaWYgQGN1cnJlbnRTRXhwP1xuICAgICAgY29tcGlsZWRTb3VyY2UgPSBjb21waWxlKEBjdXJyZW50U0V4cC5wcm9ncmFtKVxuICAgICAgYmVhdXRpZnVsU291cmNlID0gYmVhdXRpZnkoY29tcGlsZWRTb3VyY2UsIHsgaW5kZW50X3NpemU6IDIgfSlcbiAgICAgIEBjb21waWxlZEJveC50ZXh0ID0gY29tcGlsZWRTb3VyY2VcbiAgICAgIGNvbnNvbGUubG9nKFwiWypdIElOUFVUXFxuXCIsIEBjdXJyZW50U0V4cC5wcm9ncmFtKVxuICAgICAgY29uc29sZS5sb2coXCJbKl0gQ09NUElMRURcXG5cIiwgY29tcGlsZWRTb3VyY2UpXG4gICAgICB0cnlcbiAgICAgICAgb3V0cHV0ID0gZXZhbChjb21waWxlZFNvdXJjZSlcbiAgICAgICAgQG91dHB1dEJveC50ZXh0ID0gb3V0cHV0XG4gICAgICAgIGNvbnNvbGUubG9nIFwiWypdIFJVTiBPS1xcblwiLCBvdXRwdXRcbiAgICAgIGNhdGNoIGVycm9yXG4gICAgICAgIGNvbnNvbGUubG9nIFwiWyFdIFJVTiBFUlJPUlxcblwiLCBlcnJvclxuICAgICAgICBAb3V0cHV0Qm94LnRleHQgPSBlcnJvci50b1N0cmluZygpXG4gICAgZWxzZVxuICAgICAgY29uc29sZS5sb2cgJ1shXSBObyBleHByZXNzaW9uIHNlbGVjdGVkLidcbiAgcmVwbGFjZTogKCkgLT5cbiAgICBzZXhwID0gQGN1cnJlbnRTRXhwXG4gICAgaWYgc2V4cD9cbiAgICAgIHZhbHVlID0gcHJvbXB0KFwiUmVwbGFjZSAnI3tzZXhwfScgd2l0aCB3aGF0P1wiKVxuICAgICAgaWYgdmFsdWU/XG4gICAgICAgIHdpbmRvdy5wcm9nID0gQHByb2dyYW1cbiAgICAgICAgcG9zID0gXy5jbG9uZShAY3VycmVudFBvc2l0aW9uKVxuICAgICAgICBzZXQoQHByb2dyYW0sIF8uY2xvbmUocG9zKSwgdmFsdWUpXG4gICAgICAgIGxnICdjdXJyZW50UG9zaXRpb246ICcsIHBvc1xuICAgICAgICBAYnVpbGQoQHByb2dyYW0pXG4gICAgICAgIEBqdW1wKF8uY2xvbmUocG9zKSlcbiAgICAgICAgbGcgQHByb2dyYW1cblxuZWRpdG9yID0gbmV3IEVkaXRvclxuXG5lZGl0b3IuYnVpbGQgW1xuICAnZG8nLFxuICBbJ3ZhcicsIFwic2l6ZVwiLCAnMzInXSxcbiAgWyd2YXInLCBcInNxdWFyZVwiLFxuICAgIFsnZnVuYycsIFsneCddLCBbJyonLCAneCcsICd4J11dXSxcbiAgWydzcXVhcmUnLCAnc2l6ZSddXG5dXG5cbmtleSA9XG4gIGg6IDcyXG4gIGk6IDczXG4gIGo6IDc0XG4gIGs6IDc1XG4gIGw6IDc2XG4gIHI6IDgyXG4gIHNwYWNlOiAzMlxuICBlbnRlcjogMTNcbiAgc2hpZnQ6IDE2XG5cbktleUZvckNvbW1hbmQgPVxuICBHT19JTjoga2V5LmpcbiAgR09fT1VUOiBrZXkua1xuICBHT19QUkVWSU9VUzoga2V5LmhcbiAgR09fTkVYVDoga2V5LmxcbiAgQ09NUElMRToga2V5LmVudGVyXG4gIFJFUExBQ0U6IGtleS5yXG5cbmNsYXNzIEtleUhhbmRsZXJcbiAgY29uc3RydWN0b3I6IChAZWRpdG9yKSAtPlxuICAgIEBpc0Rvd24gPSB7fVxuICAgIEV2ZW50cy53cmFwKHdpbmRvdykuYWRkRXZlbnRMaXN0ZW5lciAna2V5dXAnLCAoZXZlbnQpID0+XG4gICAgICBjb25zb2xlLmxvZyAna2V5IHVwJywgZXZlbnQua2V5Q29kZVxuICAgICAgZGVsZXRlIEBpc0Rvd25bZXZlbnQua2V5Q29kZV1cbiAgICBFdmVudHMud3JhcCh3aW5kb3cpLmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nLCAoZXZlbnQpID0+XG4gICAgICBjb25zb2xlLmxvZyAna2V5IGRvd24nLCBldmVudC5rZXlDb2RlXG4gICAgICBjdXJyUG9zID0gXy5jbG9uZShlZGl0b3IuY3VycmVudFBvc2l0aW9uKVxuICAgICAgQGlzRG93bltldmVudC5rZXlDb2RlXSA9IHRydWVcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5HT19JTlxuICAgICAgICBAZWRpdG9yLmdvSW4oKVxuICAgICAgaWYgZXZlbnQua2V5Q29kZSBpcyBLZXlGb3JDb21tYW5kLkdPX09VVFxuICAgICAgICBAZWRpdG9yLmdvT3V0KClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5HT19ORVhUXG4gICAgICAgIEBlZGl0b3IuZ29OZXh0KClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5HT19QUkVWSU9VU1xuICAgICAgICBAZWRpdG9yLmdvUHJldmlvdXMoKVxuICAgICAgaWYgZXZlbnQua2V5Q29kZSBpcyBLZXlGb3JDb21tYW5kLkNPTVBJTEVcbiAgICAgICAgQGVkaXRvci5jb21waWxlKClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5SRVBMQUNFXG4gICAgICAgIEBlZGl0b3IucmVwbGFjZSgpXG4gICAgICBsZyBcInBvczogI3tjdXJyUG9zfSAtPiAje2VkaXRvci5jdXJyZW50UG9zaXRpb259XCJcblxua2V5SGFuZGxlciA9IG5ldyBLZXlIYW5kbGVyKGVkaXRvcilcblxuY29uc29sZS5sb2cgJ3J1bm5pbmcuLi4nXG4iXX0=
//# sourceURL=/Users/gvieira/code/hare/hare_framer/src_coffee/main.coffee