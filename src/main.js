// Generated by CoffeeScript 1.12.7
(function() {
  var Compiler, Editor, KeyForCommand, KeyHandler, Parser, SAtom, SExpression, SList, StorageLoader, StorageSaver, Token, __, _spliceSexp, _walk, addSexpAfter, addSexpBefore, beautify, deleteSexp, editor, evaluate, getSexp, inconsolata, isAtom, key, keyHandler, lg, render, replaceSexp, spliceSexp, walk,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  __ = require('./utils');

  beautify = require('js-beautify').js_beautify;

  Parser = require('./parser');

  Compiler = require('./compiler');

  inconsolata = Utils.loadWebFont("Inconsolata");

  lg = console.log;

  StorageSaver = (function() {
    function StorageSaver() {}

    StorageSaver.prototype.save = function(program) {
      var programJSONString;
      programJSONString = JSON.stringify(program);
      return localStorage.setItem('hare-program', programJSONString);
    };

    return StorageSaver;

  })();

  StorageLoader = (function() {
    function StorageLoader() {}

    StorageLoader.prototype.load = function() {
      var programJSONString;
      programJSONString = localStorage.getItem('hare-program');
      if (_.isString(programJSONString) && (!_.isEmpty(programJSONString))) {
        return JSON.parse(programJSONString);
      } else {
        return [];
      }
    };

    return StorageLoader;

  })();

  SExpression = (function() {
    function SExpression(tokens1, parent1, program1) {
      var sibling;
      this.tokens = tokens1;
      this.parent = parent1;
      this.program = program1;
      this.id = _.uniqueId('sexp_');
      this.children = [];
      this.previous = null;
      this.next = null;
      if (!_.isNil(this.parent)) {
        if (!_.isEmpty(this.parent.children)) {
          sibling = _.last(this.parent.children);
          this.previous = sibling;
          sibling.next = this;
        }
        this.parent.children.push(this);
      }
    }

    SExpression.prototype.toString = function() {
      if (this.tokens != null) {
        return this.tokens.map(function(t) {
          return t.text;
        }).join(' ');
      } else {
        return "NULL";
      }
    };

    SExpression.prototype.select = function(visitedTokenById, siblingIndex, parentIndex) {
      return _.each(this.tokens, function(token) {
        if (!visitedTokenById[token.id]) {
          visitedTokenById[token.id] = true;
          return token.select(siblingIndex, parentIndex);
        }
      });
    };

    SExpression.prototype.deselect = function(visitedTokenById, siblingIndex, parentIndex) {
      return _.each(this.tokens, function(token) {
        if (!visitedTokenById[token.id]) {
          visitedTokenById[token.id] = true;
          return token.deselect();
        }
      });
    };

    SExpression.prototype.destroy = function() {
      return _.each(this.tokens, function(token) {
        return token.destroy();
      });
    };

    return SExpression;

  })();

  SAtom = (function(superClass) {
    extend(SAtom, superClass);

    function SAtom(token, parent, program) {
      this.isAtom = true;
      this.isList = false;
      SAtom.__super__.constructor.call(this, [token], parent, program);
    }

    return SAtom;

  })(SExpression);

  SList = (function(superClass) {
    extend(SList, superClass);

    function SList(tokens, parent, program) {
      this.isAtom = false;
      this.isList = true;
      SList.__super__.constructor.call(this, tokens, parent, program);
    }

    return SList;

  })(SExpression);

  Token = (function(superClass) {
    extend(Token, superClass);

    Token.prototype.BACKGROUND_COLOR_DESELECTED = '#FFFFFF';

    Token.prototype.TEXT_COLOR_DESELECTED = '#AAA';

    Token.prototype.BACKGROUND_COLOR_SELECTED = '#F8F8F8';

    Token.prototype.TEXT_COLOR_SELECTED = '#000000';

    function Token(txt, x, y, tokenGroup) {
      Token.__super__.constructor.call(this, {
        parent: tokenGroup,
        text: txt,
        fontSize: 12,
        fontFamily: inconsolata,
        textAlign: 'center',
        x: x,
        y: y,
        color: this.TEXT_COLOR_DESELECTED,
        backgroundColor: this.BACKGROUND_COLOR_DESELECTED,
        padding: 7
      });
    }

    Token.prototype.select = function(siblingIndex, parentIndex) {
      if (siblingIndex === 0 && parentIndex === 0) {
        this.backgroundColor = '#000';
        return this.color = '#FFF';
      } else if (siblingIndex === 0 && parentIndex === -1) {
        this.backgroundColor = '#555';
        this.color = '#AAA';
        return this.fontWeight = 'bold';
      } else if (siblingIndex !== 0 && parentIndex === 0) {
        this.backgroundColor = '#F2F2F2';
        return this.color = '#000';
      } else {
        this.backgroundColor = '#FFF';
        return this.color = '#BBB';
      }
    };

    Token.prototype.deselect = function() {
      this.backgroundColor = this.BACKGROUND_COLOR_DESELECTED;
      return this.color = this.TEXT_COLOR_DESELECTED;
    };

    return Token;

  })(TextLayer);

  evaluate = function(sexp) {
    var args, operator, thing;
    if (!(_.isArray(sexp) && sexp.length > 0)) {
      return sexp;
    }
    operator = _.head(sexp);
    args = _.tail(sexp);
    if (operator === 'quote') {
      if (args.length === 1) {
        return args[0];
      } else {
        return "ERROR: wrong numbers of arguments";
      }
    }
    if (operator === 'atom') {
      if (args.length === 1) {
        thing = evaluate(args[0]);
        if ((_.isArray(thing) && _.isEmpty(thing)) || _.isString(thing)) {
          return 't';
        } else {
          return [];
        }
      } else {
        return "ERROR: wrong numbers of arguments";
      }
    }
  };

  window.evaluate = evaluate;

  isAtom = function(exp) {
    return _.isString(exp) || _.isNumber(exp) || _.isBoolean(exp);
  };

  render = function(exp, x, y, tokens, parentSExp, tokenGroup) {
    var lastToken, leftParens, leftParensIndex, rightParens, slist, str;
    if (isAtom(exp)) {
      str = new Token(exp, x, y, tokenGroup);
      tokens.push(str);
      return new SAtom(str, parentSExp, exp);
    } else {
      leftParens = new Token("(", x, y, tokenGroup);
      tokens.push(leftParens);
      leftParensIndex = tokens.length - 1;
      slist = new SList([], parentSExp, exp);
      _.each(exp, function(e) {
        var lastToken;
        lastToken = _.last(tokens);
        return render(e, __.xRight(lastToken), y, tokens, slist, tokenGroup);
      });
      lastToken = _.last(tokens);
      rightParens = new Token(")", __.xRight(lastToken), y, tokenGroup);
      tokens.push(rightParens);
      slist.tokens = tokens.slice(leftParensIndex);
      return slist;
    }
  };

  walk = function(sexp, callback) {
    var visitedSExpressionById, visitedTokenById;
    visitedSExpressionById = {};
    visitedTokenById = {};
    return _walk(sexp, callback, visitedSExpressionById, visitedTokenById, [0, 0]);
  };

  _walk = function(sexp, callback, visitedSExpressionById, visitedTokenById, indexPair) {
    var nextIndex, parentIndex, previousIndex, siblingIndex, upIndex;
    if (sexp == null) {
      return;
    }
    if (visitedSExpressionById[sexp.id]) {
      return;
    }
    visitedSExpressionById[sexp.id] = true;
    siblingIndex = indexPair[0];
    parentIndex = indexPair[1];
    callback(sexp, visitedTokenById, siblingIndex, parentIndex);
    nextIndex = siblingIndex != null ? siblingIndex + 1 : null;
    previousIndex = siblingIndex != null ? siblingIndex - 1 : null;
    upIndex = parentIndex != null ? parentIndex - 1 : null;
    _walk(sexp.next, callback, visitedSExpressionById, visitedTokenById, [nextIndex, parentIndex]);
    _walk(sexp.previous, callback, visitedSExpressionById, visitedTokenById, [previousIndex, parentIndex]);
    if (sexp.previous == null) {
      return _walk(sexp.parent, callback, visitedSExpressionById, visitedTokenById, [0, upIndex]);
    }
  };

  spliceSexp = function(program, position, value, deltaIndex, deleteCount) {
    if (_.isUndefined(deltaIndex)) {
      deltaIndex = 0;
    }
    if (_.isUndefined(deleteCount)) {
      deleteCount = 0;
    }
    return _spliceSexp(program, _.clone(position), value, deltaIndex, deleteCount);
  };

  _spliceSexp = function(program, position, value, deltaIndex, deleteCount) {
    var idx;
    idx = position.pop();
    if (idx != null) {
      if (typeof _.isEmpty === "function" ? _.isEmpty(position) : void 0) {
        if (typeof _.isUndefined === "function" ? _.isUndefined(value) : void 0) {
          return program.splice(idx + deltaIndex, deleteCount);
        } else {
          return program.splice(idx + deltaIndex, deleteCount, value);
        }
      } else {
        return _spliceSexp(program[idx], position, value, deltaIndex, deleteCount);
      }
    }
  };

  deleteSexp = function(program, position, value) {
    return spliceSexp(program, position, void 0, 0, 1);
  };

  replaceSexp = function(program, position, value) {
    return spliceSexp(program, position, value, 0, 1);
  };

  addSexpBefore = function(program, position, value) {
    return spliceSexp(program, position, value, 0);
  };

  addSexpAfter = function(program, position, value) {
    return spliceSexp(program, position, value, 1);
  };

  getSexp = function(sexp, position) {
    var idx;
    idx = position.pop();
    if (idx != null) {
      return getSexp(sexp.children[idx], position);
    } else {
      return sexp;
    }
  };

  Editor = (function() {
    function Editor(storageSaver, storageLoader) {
      this.storageSaver = storageSaver;
      this.storageLoader = storageLoader;
      this.compiledBox = new TextLayer({
        text: 'compiled',
        fontSize: 13,
        fontFamily: inconsolata,
        textAlign: 'left',
        x: 0,
        y: Screen.height / 2,
        width: Screen.width / 2,
        height: Screen.height / 2,
        color: '#000',
        backgroundColor: '#F6F6F6',
        padding: 10,
        borderColor: '#000',
        borderWidth: 1
      });
      this.outputBox = new TextLayer({
        text: 'output',
        fontSize: 13,
        fontFamily: inconsolata,
        textAlign: 'left',
        x: Screen.width / 2,
        y: Screen.height / 2,
        width: Screen.width / 2,
        height: Screen.height / 2,
        color: '#000',
        backgroundColor: '#F6F6F6',
        padding: 10,
        borderColor: '#000',
        borderWidth: 1
      });
    }

    Editor.prototype.build = function(program) {
      if (_.isUndefined(program)) {
        program = this.storageLoader.load();
      }
      if (!_.isUndefined(this.tokenGroup)) {
        this.tokenGroup.destroy();
      }
      this.program = program;
      this.currentPosition = [];
      this.currentSExp = null;
      this.tokenGroup = new Layer({
        backgroundColor: 'rgba(255, 255, 255, 0.0)'
      });
      this.rootSExp = render(this.program, 0, 0, [], null, this.tokenGroup);
      this.tokenGroup.height = this.rootSExp.tokens[0].height;
      this.tokenGroup.width = _.reduce(_.map(this.rootSExp.tokens, function(t) {
        return t.width;
      }), _.add, 0);
      this.tokenGroup.x = Align.center;
      return this.tokenGroup.y = (Screen.height / 2) - this.tokenGroup.height - 10;
    };

    Editor.prototype.jump = function(pos) {
      var newSexp;
      this.currentPosition = _.clone(pos);
      newSexp = getSexp(this.rootSExp, pos);
      return this.setCurrentSExp(newSexp);
    };

    Editor.prototype.go = function(dir) {
      var targetSExp;
      if (_.isNil(this.currentSExp) && dir !== 'in') {
        return false;
      }
      targetSExp = _.isNil(this.currentSExp) ? this.rootSExp : {
        next: this.currentSExp.next,
        previous: this.currentSExp.previous,
        "in": _.first(this.currentSExp.children),
        out: this.currentSExp.parent
      }[dir];
      if (targetSExp != null) {
        this.setCurrentSExp(targetSExp);
        return true;
      } else if (this.currentSExp === this.rootSExp && dir === 'out') {
        this.setCurrentSExp(null);
        return true;
      } else {
        return false;
      }
    };

    Editor.prototype.setCurrentSExp = function(newSexp) {
      walk(this.rootSExp, function(sexp, visitedTokenById, siblingIndex, parentIndex) {
        return sexp.deselect(visitedTokenById, siblingIndex, parentIndex);
      });
      if (newSexp != null) {
        this.currentSExp = newSexp;
        return walk(this.currentSExp, function(sexp, visitedTokenById, siblingIndex, parentIndex) {
          return sexp.select(visitedTokenById, siblingIndex, parentIndex);
        });
      } else {
        return this.currentSExp = null;
      }
    };

    Editor.prototype.goNext = function() {
      if (this.go('next')) {
        return this.currentPosition[0] += 1;
      }
    };

    Editor.prototype.goPrevious = function() {
      if (this.go('previous')) {
        return this.currentPosition[0] -= 1;
      }
    };

    Editor.prototype.goIn = function() {
      var sexp;
      sexp = this.currentSExp;
      if (this.go('in') && this.currentSExp !== this.rootSExp) {
        this.currentPosition.unshift(0);
        return this.detach(sexp);
      }
    };

    Editor.prototype.goOut = function() {
      var sexp;
      sexp = this.currentSExp;
      if (this.go('out') && this.currentSExp !== null) {
        this.currentPosition.shift();
        lg('retach: ', this.currentSExp);
        return this.retach(this.currentSExp);
      }
    };

    Editor.prototype.compile = function() {
      var beautifulSource, compiledSource, error, output;
      if (this.currentSExp != null) {
        compiledSource = Compiler.compile(this.currentSExp.program);
        beautifulSource = beautify(compiledSource, {
          indent_size: 2
        });
        this.compiledBox.text = compiledSource;
        console.log("[*] INPUT\n", this.currentSExp.program);
        console.log("[*] COMPILED\n", compiledSource);
        try {
          output = eval(compiledSource);
          this.outputBox.text = output;
          return console.log("[*] RUN OK\n", output);
        } catch (error1) {
          error = error1;
          console.log("[!] RUN ERROR\n", error);
          return this.outputBox.text = error.toString();
        }
      } else {
        return console.log('[!] No expression selected.');
      }
    };

    Editor.prototype.addBefore = function() {
      var pos, rawValue, sexp, value;
      sexp = this.currentSExp;
      if (sexp != null) {
        rawValue = prompt("Add what?");
        if (rawValue != null) {
          value = Parser.parse(rawValue);
          lg('Value: ', value);
          pos = _.clone(this.currentPosition);
          addSexpBefore(this.program, _.clone(pos), value);
          lg('currentPosition: ', pos);
          this.build(this.program);
          this.jump(_.clone(pos));
          lg(this.program);
          return this.storageSaver.save(this.program);
        }
      }
    };

    Editor.prototype.addAfter = function() {
      var pos, rawValue, sexp, value;
      sexp = this.currentSExp;
      if (sexp != null) {
        rawValue = prompt("Add what?");
        if (rawValue != null) {
          value = Parser.parse(rawValue);
          lg('Value: ', value);
          pos = _.clone(this.currentPosition);
          addSexpAfter(this.program, _.clone(pos), value, 1);
          lg('currentPosition: ', pos);
          this.build(this.program);
          if (pos.length > 0) {
            pos[0] += 1;
          }
          this.jump(pos);
          lg(this.program);
          return this.storageSaver.save(this.program);
        }
      }
    };

    Editor.prototype["delete"] = function() {
      var pos;
      if (this.currentSExp != null) {
        pos = _.clone(this.currentPosition);
        deleteSexp(this.program, this.currentPosition);
        this.build(this.program);
        if (pos[0] > 0) {
          pos[0] -= 1;
        }
        this.jump(pos);
        return this.storageSaver.save(this.program);
      }
    };

    Editor.prototype.replace = function() {
      var pos, rawValue, sexp, value;
      sexp = this.currentSExp;
      if (sexp != null) {
        rawValue = prompt("Replace '" + sexp + "' with what?");
        if (rawValue != null) {
          value = Parser.parse(rawValue);
          lg('Value: ', value);
          pos = _.clone(this.currentPosition);
          replaceSexp(this.program, _.clone(pos), value);
          lg('currentPosition: ', pos);
          this.build(this.program);
          this.jump(_.clone(pos));
          lg(this.program);
          return this.storageSaver.save(this.program);
        }
      }
    };

    Editor.prototype.detach = function(sexp) {
      var dy;
      return dy = 50;
    };

    Editor.prototype.retach = function(sexp) {
      var dy;
      return dy = 50;
    };

    return Editor;

  })();

  editor = new Editor(new StorageSaver(), new StorageLoader());

  editor.build();

  key = {
    h: 72,
    i: 73,
    j: 74,
    k: 75,
    l: 76,
    r: 82,
    a: 65,
    w: 87,
    s: 83,
    d: 68,
    ";": 186,
    space: 32,
    enter: 13,
    shift: 16
  };

  KeyForCommand = {
    GO_IN: key.j,
    GO_OUT: key.k,
    GO_PREVIOUS: key.h,
    GO_NEXT: key.l,
    COMPILE: key.enter,
    REPLACE: key.r,
    ADD_BEFORE: key.a,
    ADD_AFTER: key.i,
    DELETE: key.d,
    DETACH: key.space
  };

  KeyHandler = (function() {
    function KeyHandler(editor1) {
      this.editor = editor1;
      this.isDown = {};
      Events.wrap(window).addEventListener('keyup', (function(_this) {
        return function(event) {
          return delete _this.isDown[event.keyCode];
        };
      })(this));
      Events.wrap(window).addEventListener('keydown', (function(_this) {
        return function(event) {
          var currPos;
          console.log('key down', event.keyCode);
          currPos = _.clone(editor.currentPosition);
          _this.isDown[event.keyCode] = true;
          if (event.keyCode === KeyForCommand.GO_IN) {
            _this.editor.goIn();
          }
          if (event.keyCode === KeyForCommand.GO_OUT) {
            _this.editor.goOut();
          }
          if (event.keyCode === KeyForCommand.GO_NEXT) {
            _this.editor.goNext();
          }
          if (event.keyCode === KeyForCommand.GO_PREVIOUS) {
            _this.editor.goPrevious();
          }
          if (event.keyCode === KeyForCommand.COMPILE) {
            _this.editor.compile();
          }
          if (event.keyCode === KeyForCommand.REPLACE) {
            _this.editor.replace();
          }
          if (event.keyCode === KeyForCommand.ADD_BEFORE) {
            _this.editor.addBefore();
          }
          if (event.keyCode === KeyForCommand.ADD_AFTER) {
            _this.editor.addAfter();
          }
          if (event.keyCode === KeyForCommand.DELETE) {
            _this.editor["delete"]();
          }
          if (event.keyCode === KeyForCommand.DETACH) {
            _this.editor.detach();
          }
          return lg("current position", editor.currentPosition);
        };
      })(this));
    }

    return KeyHandler;

  })();

  keyHandler = new KeyHandler(editor);

  console.log('running...');

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsic3JjX2NvZmZlZS9tYWluLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0E7QUFBQSxNQUFBLHlTQUFBO0lBQUE7OztFQUFBLEVBQUEsR0FBSyxPQUFBLENBQVEsU0FBUjs7RUFDTCxRQUFBLEdBQVcsT0FBQSxDQUFRLGFBQVIsQ0FBc0IsQ0FBQzs7RUFDbEMsTUFBQSxHQUFTLE9BQUEsQ0FBUSxVQUFSOztFQUNULFFBQUEsR0FBVyxPQUFBLENBQVEsWUFBUjs7RUFFWCxXQUFBLEdBQWMsS0FBSyxDQUFDLFdBQU4sQ0FBa0IsYUFBbEI7O0VBQ2QsRUFBQSxHQUFLLE9BQU8sQ0FBQzs7RUFFUDtJQUNTLHNCQUFBLEdBQUE7OzJCQUNiLElBQUEsR0FBTSxTQUFDLE9BQUQ7QUFDSixVQUFBO01BQUEsaUJBQUEsR0FBb0IsSUFBSSxDQUFDLFNBQUwsQ0FBZSxPQUFmO2FBQ3BCLFlBQVksQ0FBQyxPQUFiLENBQXFCLGNBQXJCLEVBQXFDLGlCQUFyQztJQUZJOzs7Ozs7RUFJRjtJQUNTLHVCQUFBLEdBQUE7OzRCQUNiLElBQUEsR0FBTSxTQUFBO0FBQ0osVUFBQTtNQUFBLGlCQUFBLEdBQW9CLFlBQVksQ0FBQyxPQUFiLENBQXFCLGNBQXJCO01BQ3BCLElBQUcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxpQkFBWCxDQUFBLElBQWlDLENBQUMsQ0FBSSxDQUFDLENBQUMsT0FBRixDQUFVLGlCQUFWLENBQUwsQ0FBcEM7ZUFDRSxJQUFJLENBQUMsS0FBTCxDQUFXLGlCQUFYLEVBREY7T0FBQSxNQUFBO2VBR0UsR0FIRjs7SUFGSTs7Ozs7O0VBT0Y7SUFDUyxxQkFBQyxPQUFELEVBQVUsT0FBVixFQUFtQixRQUFuQjtBQUNYLFVBQUE7TUFEWSxJQUFDLENBQUEsU0FBRDtNQUFTLElBQUMsQ0FBQSxTQUFEO01BQVMsSUFBQyxDQUFBLFVBQUQ7TUFDOUIsSUFBQyxDQUFBLEVBQUQsR0FBTSxDQUFD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RUErQmYsVUFBQSxHQUFhLElBQUksVUFBSixDQUFlLE1BQWY7O0VBRWIsT0FBTyxDQUFDLEdBQVIsQ0FBWSxZQUFaO0FBbmdCQSIsInNvdXJjZXNDb250ZW50IjpbIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbXBvcnRzXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbl9fID0gcmVxdWlyZSAnLi91dGlscydcbmJlYXV0aWZ5ID0gcmVxdWlyZSgnanMtYmVhdXRpZnknKS5qc19iZWF1dGlmeVxuUGFyc2VyID0gcmVxdWlyZSAnLi9wYXJzZXInXG5Db21waWxlciA9IHJlcXVpcmUgJy4vY29tcGlsZXInXG5cbmluY29uc29sYXRhID0gVXRpbHMubG9hZFdlYkZvbnQoXCJJbmNvbnNvbGF0YVwiKVxubGcgPSBjb25zb2xlLmxvZ1xuXG5jbGFzcyBTdG9yYWdlU2F2ZXJcbiAgY29uc3RydWN0b3I6ICgpIC0+XG4gIHNhdmU6IChwcm9ncmFtKSAtPlxuICAgIHByb2dyYW1KU09OU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocHJvZ3JhbSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaGFyZS1wcm9ncmFtJywgcHJvZ3JhbUpTT05TdHJpbmcpXG5cbmNsYXNzIFN0b3JhZ2VMb2FkZXJcbiAgY29uc3RydWN0b3I6ICgpIC0+XG4gIGxvYWQ6ICgpIC0+XG4gICAgcHJvZ3JhbUpTT05TdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGFyZS1wcm9ncmFtJylcbiAgICBpZiBfLmlzU3RyaW5nKHByb2dyYW1KU09OU3RyaW5nKSAmJiAobm90IF8uaXNFbXB0eShwcm9ncmFtSlNPTlN0cmluZykpXG4gICAgICBKU09OLnBhcnNlKHByb2dyYW1KU09OU3RyaW5nKVxuICAgIGVsc2VcbiAgICAgIFtdXG5cbmNsYXNzIFNFeHByZXNzaW9uXG4gIGNvbnN0cnVjdG9yOiAoQHRva2VucywgQHBhcmVudCwgQHByb2dyYW0pIC0+XG4gICAgQGlkID0gXy51bmlxdWVJZCgnc2V4cF8nKVxuICAgIEBjaGlsZHJlbiA9IFtdXG4gICAgQHByZXZpb3VzID0gbnVsbFxuICAgIEBuZXh0ID0gbnVsbFxuICAgIGlmIG5vdCBfLmlzTmlsKEBwYXJlbnQpXG4gICAgICBpZiBub3QgXy5pc0VtcHR5KEBwYXJlbnQuY2hpbGRyZW4pXG4gICAgICAgIHNpYmxpbmcgPSBfLmxhc3QoQHBhcmVudC5jaGlsZHJlbilcbiAgICAgICAgQHByZXZpb3VzID0gc2libGluZ1xuICAgICAgICBzaWJsaW5nLm5leHQgPSB0aGlzXG4gICAgICBAcGFyZW50LmNoaWxkcmVuLnB1c2godGhpcylcbiAgdG9TdHJpbmc6ICgpIC0+XG4gICAgaWYgQHRva2Vucz8gdGhlbiBAdG9rZW5zLm1hcCgodCkgLT4gdC50ZXh0KS5qb2luKCcgJykgZWxzZSBcIk5VTExcIlxuICBzZWxlY3Q6ICh2aXNpdGVkVG9rZW5CeUlkLCBzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KSAtPlxuICAgIF8uZWFjaCBAdG9rZW5zLCAodG9rZW4pIC0+XG4gICAgICBpZiBub3QgdmlzaXRlZFRva2VuQnlJZFt0b2tlbi5pZF1cbiAgICAgICAgdmlzaXRlZFRva2VuQnlJZFt0b2tlbi5pZF0gPSB0cnVlXG4gICAgICAgIHRva2VuLnNlbGVjdChzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KVxuICBkZXNlbGVjdDogKHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpIC0+XG4gICAgXy5lYWNoIEB0b2tlbnMsICh0b2tlbikgLT5cbiAgICAgIGlmIG5vdCB2aXNpdGVkVG9rZW5CeUlkW3Rva2VuLmlkXVxuICAgICAgICB2aXNpdGVkVG9rZW5CeUlkW3Rva2VuLmlkXSA9IHRydWVcbiAgICAgICAgdG9rZW4uZGVzZWxlY3QoKVxuICBkZXN0cm95OiAoKSAtPlxuICAgIF8uZWFjaCBAdG9rZW5zLCAodG9rZW4pIC0+XG4gICAgICB0b2tlbi5kZXN0cm95KClcblxuY2xhc3MgU0F0b20gZXh0ZW5kcyBTRXhwcmVzc2lvblxuICBjb25zdHJ1Y3RvcjogKHRva2VuLCBwYXJlbnQsIHByb2dyYW0pIC0+XG4gICAgQGlzQXRvbSA9IHRydWVcbiAgICBAaXNMaXN0ID0gZmFsc2VcbiAgICBzdXBlciBbdG9rZW5dLCBwYXJlbnQsIHByb2dyYW1cblxuY2xhc3MgU0xpc3QgZXh0ZW5kcyBTRXhwcmVzc2lvblxuICBjb25zdHJ1Y3RvcjogKHRva2VucywgcGFyZW50LCBwcm9ncmFtKSAtPlxuICAgIEBpc0F0b20gPSBmYWxzZVxuICAgIEBpc0xpc3QgPSB0cnVlXG4gICAgc3VwZXIgdG9rZW5zLCBwYXJlbnQsIHByb2dyYW1cblxuY2xhc3MgVG9rZW4gZXh0ZW5kcyBUZXh0TGF5ZXJcbiAgQkFDS0dST1VORF9DT0xPUl9ERVNFTEVDVEVEOiAnI0ZGRkZGRidcbiAgVEVYVF9DT0xPUl9ERVNFTEVDVEVEOiAnI0FBQSdcbiAgQkFDS0dST1VORF9DT0xPUl9TRUxFQ1RFRDogJyNGOEY4RjgnXG4gIFRFWFRfQ09MT1JfU0VMRUNURUQ6ICcjMDAwMDAwJ1xuICBjb25zdHJ1Y3RvcjogKHR4dCwgeCwgeSwgdG9rZW5Hcm91cCkgLT5cbiAgICBzdXBlclxuICAgICAgcGFyZW50OiB0b2tlbkdyb3VwXG4gICAgICB0ZXh0OiB0eHRcbiAgICAgIGZvbnRTaXplOiAxMlxuICAgICAgZm9udEZhbWlseTogaW5jb25zb2xhdGFcbiAgICAgIHRleHRBbGlnbjogJ2NlbnRlcidcbiAgICAgIHg6IHhcbiAgICAgIHk6IHlcbiAgICAgIGNvbG9yOiBAVEVYVF9DT0xPUl9ERVNFTEVDVEVEXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IEBCQUNLR1JPVU5EX0NPTE9SX0RFU0VMRUNURURcbiAgICAgIHBhZGRpbmc6IDdcbiAgc2VsZWN0OiAoc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT5cbiAgICAjIGNvbnNvbGUubG9nIFwiJyN7QHRleHR9J1xcblxcdC0tPlxcdCgje3NpYmxpbmdJbmRleH0sICN7cGFyZW50SW5kZXh9KVwiXG4gICAgaWYgc2libGluZ0luZGV4ID09IDAgJiYgcGFyZW50SW5kZXggPT0gMFxuICAgICAgQGJhY2tncm91bmRDb2xvciA9ICcjMDAwJ1xuICAgICAgQGNvbG9yID0gJyNGRkYnXG4gICAgZWxzZSBpZiBzaWJsaW5nSW5kZXggPT0gMCAmJiBwYXJlbnRJbmRleCA9PSAtMVxuICAgICAgQGJhY2tncm91bmRDb2xvciA9ICcjNTU1J1xuICAgICAgQGNvbG9yID0gJyNBQUEnXG4gICAgICBAZm9udFdlaWdodCA9ICdib2xkJ1xuICAgIGVsc2UgaWYgc2libGluZ0luZGV4ICE9IDAgJiYgcGFyZW50SW5kZXggPT0gMFxuICAgICAgQGJhY2tncm91bmRDb2xvciA9ICcjRjJGMkYyJ1xuICAgICAgQGNvbG9yID0gJyMwMDAnXG4gICAgZWxzZVxuICAgICAgQGJhY2tncm91bmRDb2xvciA9ICcjRkZGJ1xuICAgICAgQGNvbG9yID0gJyNCQkInXG4gIGRlc2VsZWN0OiAoKSAtPlxuICAgIEBiYWNrZ3JvdW5kQ29sb3IgPSBAQkFDS0dST1VORF9DT0xPUl9ERVNFTEVDVEVEXG4gICAgQGNvbG9yID0gQFRFWFRfQ09MT1JfREVTRUxFQ1RFRFxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBFVkFMVUFURVxuIyB3b3JrIGluIHByb2dyZXNzXG5ldmFsdWF0ZSA9IChzZXhwKSAtPlxuICByZXR1cm4gc2V4cCB1bmxlc3MgXy5pc0FycmF5KHNleHApICYmIHNleHAubGVuZ3RoID4gMFxuICBvcGVyYXRvciA9IF8uaGVhZChzZXhwKVxuICBhcmdzID0gXy50YWlsKHNleHApXG4gIGlmIG9wZXJhdG9yIGlzICdxdW90ZSdcbiAgICBpZiBhcmdzLmxlbmd0aCA9PSAxXG4gICAgICByZXR1cm4gYXJnc1swXVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBcIkVSUk9SOiB3cm9uZyBudW1iZXJzIG9mIGFyZ3VtZW50c1wiXG4gIGlmIG9wZXJhdG9yIGlzICdhdG9tJ1xuICAgIGlmIGFyZ3MubGVuZ3RoID09IDFcbiAgICAgIHRoaW5nID0gZXZhbHVhdGUoYXJnc1swXSlcbiAgICAgIHJldHVybiBpZiAoXy5pc0FycmF5KHRoaW5nKSBhbmQgXy5pc0VtcHR5KHRoaW5nKSkgb3IgXy5pc1N0cmluZyh0aGluZykgdGhlbiAndCcgZWxzZSBbXVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBcIkVSUk9SOiB3cm9uZyBudW1iZXJzIG9mIGFyZ3VtZW50c1wiXG5cbndpbmRvdy5ldmFsdWF0ZSA9IGV2YWx1YXRlXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFJFTkRFUlxuIyBkaXJlY3RKYXZhU2NyaXB0ID0gKHByb2dyYW0pIC0+XG4jICAgaGFyZVRvSnMgPVxuIyAgICAgJ3JvdW5kJzogJ01hdGgucm91bmQnXG4jICAgICAnZmxvb3InOiAnTWF0aC5mbG9vcidcbiMgICAgICdjZWlsaW5nJzogJ01hdGguY2VpbGluZydcbiMgICAgICdeJzogJ01hdGgucG93J1xuIyAgICAgJ8uGJzogJ01hdGgucG93J1xuIyAgICAgJ3NxcnQnOiAnTWF0aC5zcXJ0J1xuIyAgICAgJ21heCc6ICdNYXRoLm1heCdcbiMgICAgICdtaW4nOiAnTWF0aC5taW4nXG4jICAgICAnY29zJzogJ01hdGguY29zJ1xuIyAgICAgJ3Npbic6ICdNYXRoLnNpbidcbiMgICAgICd0YW4nOiAnTWF0aC50YW4nXG4jICAgICAnYWNvcyc6ICdNYXRoLmFjb3MnXG4jICAgICAnYXNpbic6ICdNYXRoLmFzaW4nXG4jICAgICAnYXRhbic6ICdNYXRoLmF0YW4nXG4jICAgICAnbG9nJzogJ01hdGgubG9nJ1xuIyAgICAgJ2xvZzEwJzogJ01hdGgubG9nMTAnXG4jICAgICAnRSc6ICdNYXRoLkUnXG4jICAgICAnUEknOiAnTWF0aC5QSSdcbiMgICAgICdyYW5kb20nOiAnTWF0aC5yYW5kb20nXG4jICAgZm9yIGtleSwgdmFsdWUgb2YgX1xuIyAgICAgaWYgXy5oYXNPd25Qcm9wZXJ0eShrZXkpXG4jICAgICAgIGhhcmVUb0pzW2tleV0gPSBcIl8uI3trZXl9XCJcbiMgICBqcyA9IGhhcmVUb0pzW3Byb2dyYW1dXG4jICAgaWYgXy5pc1VuZGVmaW5lZChqcykgdGhlbiBwcm9ncmFtIGVsc2UganNcblxuIyBjb21waWxlID0gKHByb2dyYW0pIC0+XG4jICAgaWYgbm90IF8uaXNBcnJheShwcm9ncmFtKVxuIyAgICAgZGlyZWN0SmF2YVNjcmlwdChwcm9ncmFtKVxuIyAgIGVsc2UgaWYgXy5maXJzdChwcm9ncmFtKSA9PSAnZG8nXG4jICAgICBleHBzID0gXy5jaGFpbihwcm9ncmFtKS5kcm9wKDEpLm1hcChjb21waWxlKS52YWx1ZSgpXG4jICAgICBib2R5ID0gXy5kcm9wUmlnaHQoZXhwcykuY29uY2F0KFwicmV0dXJuICN7Xy5sYXN0KGV4cHMpfTtcIilcbiMgICAgIGJvZHlTdHIgPSBib2R5LmpvaW4oXCI7XFxuXCIpXG4jICAgICBcIihmdW5jdGlvbiAoKSB7ICN7Ym9keVN0cn0gfSkoKVwiXG4jICAgZWxzZSBpZiBfLmZpcnN0KHByb2dyYW0pID09ICdnZXQnICMgKGdldCBhcnJheSAyKSAtPiBhcnJheVsyXVxuIyAgICAgXCIje3Byb2dyYW1bMV19WyN7Y29tcGlsZShwcm9ncmFtWzJdKX1dXCJcbiMgICBlbHNlIGlmIF8uZmlyc3QocHJvZ3JhbSkgPT0gJ3NldCcgIyAoc2V0IGFycmF5IDIgXCJmb29cIikgLT4gYXJyYXlbMl0gPSBcImZvb1wiXG4jICAgICBcIiN7cHJvZ3JhbVsxXX1bI3tjb21waWxlKHByb2dyYW1bMl0pfV0gPSAje2NvbXBpbGUocHJvZ3JhbVszXSl9XCJcbiMgICBlbHNlIGlmIF8uZmlyc3QocHJvZ3JhbSkgPT0gJ3ZhcidcbiMgICAgIFwidmFyICN7cHJvZ3JhbVsxXX0gPSAje2NvbXBpbGUocHJvZ3JhbVsyXSl9XCJcbiMgICBlbHNlIGlmIF8uZmlyc3QocHJvZ3JhbSkgPT0gJ2lmJ1xuIyAgICAgXCIoI3tjb21waWxlKHByb2dyYW1bMV0pfSkgPyAoI3tjb21waWxlKHByb2dyYW1bMl0pfSkgOiAoI3tjb21waWxlKHByb2dyYW1bM10pfSlcIlxuIyAgIGVsc2UgaWYgcHJvZ3JhbVswXSA9PSAnbGlzdCdcbiMgICAgIFtcIltcIl0gKyBfLm1hcChwcm9ncmFtLnNsaWNlKDEpLCBjb21waWxlKS5qb2luKFwiLCBcIikgKyBbXCJdXCJdXG4jICAgZWxzZSBpZiBwcm9ncmFtWzBdID09ICdmdW5jJ1xuIyAgICAgYXJncyA9IHByb2dyYW1bMV0uam9pbignLCAnKVxuIyAgICAgcmVzdCA9IF8uY2hhaW4ocHJvZ3JhbSkuZHJvcCgyKS5tYXAoY29tcGlsZSkudmFsdWUoKVxuIyAgICAgXCJmdW5jdGlvbiAoI3thcmdzfSkgeyByZXR1cm4gI3tyZXN0fTsgfVwiXG4jICAgZWxzZSBpZiBfLmluY2x1ZGVzKFBhcnNlci5wYXJzZSgnKCogKyAtICUgPCA+IDw9ID49ID0gb3IgYW5kKScpLCBwcm9ncmFtWzBdKVxuIyAgICAgb3AgPSBpZiAnPScgPT0gcHJvZ3JhbVswXVxuIyAgICAgICAnPT09J1xuIyAgICAgZWxzZSBpZiAnb3InID09IHByb2dyYW1bMF1cbiMgICAgICAgJ3x8J1xuIyAgICAgZWxzZSBpZiAnYW5kJyA9PSBwcm9ncmFtWzBdXG4jICAgICAgICcmJidcbiMgICAgIGVsc2VcbiMgICAgICAgcHJvZ3JhbVswXVxuIyAgICAgXCIoI3tjb21waWxlKHByb2dyYW1bMV0pfSkgI3tvcH0gKCN7Y29tcGlsZShwcm9ncmFtWzJdKX0pXCJcbiMgICBlbHNlIGlmIHByb2dyYW1bMF0gPT0gJ25vdCdcbiMgICAgIFwiISgje2NvbXBpbGUocHJvZ3JhbVsxXSl9KVwiXG4jICAgZWxzZVxuIyAgICAgYXJnbGlzdCA9IF8uY2hhaW4ocHJvZ3JhbSkudGFpbCgpLm1hcChjb21waWxlKS52YWx1ZSgpXG4jICAgICBcIiN7ZGlyZWN0SmF2YVNjcmlwdChwcm9ncmFtWzBdKX0oI3thcmdsaXN0fSlcIlxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBSRU5ERVJcbmlzQXRvbSA9IChleHApIC0+XG4gIF8uaXNTdHJpbmcoZXhwKSBvciBfLmlzTnVtYmVyKGV4cCkgb3IgXy5pc0Jvb2xlYW4oZXhwKVxuXG5yZW5kZXIgPSAoZXhwLCB4LCB5LCB0b2tlbnMsIHBhcmVudFNFeHAsIHRva2VuR3JvdXApIC0+XG4gIGlmIGlzQXRvbShleHApXG4gICAgc3RyID0gbmV3IFRva2VuKGV4cCwgeCwgeSwgdG9rZW5Hcm91cClcbiAgICB0b2tlbnMucHVzaChzdHIpXG4gICAgcmV0dXJuIG5ldyBTQXRvbShzdHIsIHBhcmVudFNFeHAsIGV4cClcbiAgZWxzZVxuICAgIGxlZnRQYXJlbnMgPSBuZXcgVG9rZW4oXCIoXCIsIHgsIHksIHRva2VuR3JvdXApXG4gICAgdG9rZW5zLnB1c2gobGVmdFBhcmVucylcbiAgICBsZWZ0UGFyZW5zSW5kZXggPSB0b2tlbnMubGVuZ3RoIC0gMVxuICAgIHNsaXN0ID0gbmV3IFNMaXN0KFtdLCBwYXJlbnRTRXhwLCBleHApXG4gICAgXy5lYWNoIGV4cCwgKGUpIC0+XG4gICAgICBsYXN0VG9rZW4gPSBfLmxhc3QodG9rZW5zKVxuICAgICAgcmVuZGVyKGUsIF9fLnhSaWdodChsYXN0VG9rZW4pLCB5LCB0b2tlbnMsIHNsaXN0LCB0b2tlbkdyb3VwKVxuICAgIGxhc3RUb2tlbiA9IF8ubGFzdCh0b2tlbnMpXG4gICAgcmlnaHRQYXJlbnMgPSBuZXcgVG9rZW4oXCIpXCIsIF9fLnhSaWdodChsYXN0VG9rZW4pLCB5LCB0b2tlbkdyb3VwKVxuICAgIHRva2Vucy5wdXNoKHJpZ2h0UGFyZW5zKVxuICAgIHNsaXN0LnRva2VucyA9IHRva2Vucy5zbGljZShsZWZ0UGFyZW5zSW5kZXgpXG4gICAgcmV0dXJuIHNsaXN0XG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFdBTEtcbiMgICBUT0RPOiByZW1vdmUgdGhlc2UgdmFyaWFibGVzIGZyb20gdGhlIGZ1bmN0aW9uIGhlYWRlcjogdmlzaXRlZFNFeHByZXNzaW9uQnlJZCB2aXNpdGVkVG9rZW5CeUlkXG53YWxrID0gKHNleHAsIGNhbGxiYWNrKSAtPlxuICAjIGNvbnNvbGUubG9nIFwid2Fsa2luZyBmcm9tOiBcIiwgc2V4cC50b1N0cmluZygpXG4gIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWQgPSB7fVxuICB2aXNpdGVkVG9rZW5CeUlkID0ge31cbiAgX3dhbGsoc2V4cCwgY2FsbGJhY2ssIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWQsIHZpc2l0ZWRUb2tlbkJ5SWQsIFswLCAwXSlcblxuX3dhbGsgPSAoc2V4cCwgY2FsbGJhY2ssIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWQsIHZpc2l0ZWRUb2tlbkJ5SWQsIGluZGV4UGFpcikgLT5cbiAgcmV0dXJuIHVubGVzcyBzZXhwP1xuICByZXR1cm4gaWYgdmlzaXRlZFNFeHByZXNzaW9uQnlJZFtzZXhwLmlkXVxuICB2aXNpdGVkU0V4cHJlc3Npb25CeUlkW3NleHAuaWRdID0gdHJ1ZVxuICBzaWJsaW5nSW5kZXggPSBpbmRleFBhaXJbMF1cbiAgcGFyZW50SW5kZXggPSBpbmRleFBhaXJbMV1cbiAgY2FsbGJhY2soc2V4cCwgdmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleClcbiAgbmV4dEluZGV4ID0gaWYgc2libGluZ0luZGV4PyB0aGVuIHNpYmxpbmdJbmRleCArIDEgZWxzZSBudWxsXG4gIHByZXZpb3VzSW5kZXggPSBpZiBzaWJsaW5nSW5kZXg/IHRoZW4gc2libGluZ0luZGV4IC0gMSBlbHNlIG51bGxcbiAgdXBJbmRleCA9IGlmIHBhcmVudEluZGV4PyB0aGVuIHBhcmVudEluZGV4IC0gMSBlbHNlIG51bGxcbiAgIyBkb3duSW5kZXggPSBpZiBwYXJlbnRJbmRleD8gdGhlbiBwYXJlbnRJbmRleCArIDEgZWxzZSBudWxsXG4gIF93YWxrKHNleHAubmV4dCwgY2FsbGJhY2ssIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWQsIHZpc2l0ZWRUb2tlbkJ5SWQsIFtuZXh0SW5kZXgsIHBhcmVudEluZGV4XSlcbiAgX3dhbGsoc2V4cC5wcmV2aW91cywgY2FsbGJhY2ssIHZpc2l0ZWRTRXhwcmVzc2lvbkJ5SWQsIHZpc2l0ZWRUb2tlbkJ5SWQsIFtwcmV2aW91c0luZGV4LCBwYXJlbnRJbmRleF0pXG4gIGlmIG5vdCBzZXhwLnByZXZpb3VzP1xuICAgIF93YWxrKHNleHAucGFyZW50LCBjYWxsYmFjaywgdmlzaXRlZFNFeHByZXNzaW9uQnlJZCwgdmlzaXRlZFRva2VuQnlJZCwgWzAsIHVwSW5kZXhdKVxuICAjIF93YWxrKF8uZmlyc3Qoc2V4cC5jaGlsZHJlbiksIGNhbGxiYWNrLCB2aXNpdGVkLCBbbnVsbCwgZG93bkluZGV4XSlcblxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgU0V4cHJlc3Npb24gbWFuaXB1bGF0aW9uXG5cbnNwbGljZVNleHAgPSAocHJvZ3JhbSwgcG9zaXRpb24sIHZhbHVlLCBkZWx0YUluZGV4LCBkZWxldGVDb3VudCkgLT5cbiAgaWYgXy5pc1VuZGVmaW5lZChkZWx0YUluZGV4KVxuICAgIGRlbHRhSW5kZXggPSAwXG4gIGlmIF8uaXNVbmRlZmluZWQoZGVsZXRlQ291bnQpXG4gICAgZGVsZXRlQ291bnQgPSAwXG4gIF9zcGxpY2VTZXhwKHByb2dyYW0sIF8uY2xvbmUocG9zaXRpb24pLCB2YWx1ZSwgZGVsdGFJbmRleCwgZGVsZXRlQ291bnQpXG5cbl9zcGxpY2VTZXhwID0gKHByb2dyYW0sIHBvc2l0aW9uLCB2YWx1ZSwgZGVsdGFJbmRleCwgZGVsZXRlQ291bnQpIC0+XG4gIGlkeCA9IHBvc2l0aW9uLnBvcCgpXG4gIGlmIGlkeD9cbiAgICBpZiBfLmlzRW1wdHk/IHBvc2l0aW9uXG4gICAgICBpZiBfLmlzVW5kZWZpbmVkPyB2YWx1ZVxuICAgICAgICBwcm9ncmFtLnNwbGljZShpZHggKyBkZWx0YUluZGV4LCBkZWxldGVDb3VudClcbiAgICAgIGVsc2VcbiAgICAgICAgcHJvZ3JhbS5zcGxpY2UoaWR4ICsgZGVsdGFJbmRleCwgZGVsZXRlQ291bnQsIHZhbHVlKVxuICAgIGVsc2VcbiAgICAgIF9zcGxpY2VTZXhwKHByb2dyYW1baWR4XSwgcG9zaXRpb24sIHZhbHVlLCBkZWx0YUluZGV4LCBkZWxldGVDb3VudClcblxuZGVsZXRlU2V4cCA9IChwcm9ncmFtLCBwb3NpdGlvbiwgdmFsdWUpIC0+XG4gIHNwbGljZVNleHAocHJvZ3JhbSwgcG9zaXRpb24sIHVuZGVmaW5lZCwgMCwgMSlcblxucmVwbGFjZVNleHAgPSAocHJvZ3JhbSwgcG9zaXRpb24sIHZhbHVlKSAtPlxuICBzcGxpY2VTZXhwKHByb2dyYW0sIHBvc2l0aW9uLCB2YWx1ZSwgMCwgMSlcblxuYWRkU2V4cEJlZm9yZSA9IChwcm9ncmFtLCBwb3NpdGlvbiwgdmFsdWUpIC0+XG4gIHNwbGljZVNleHAocHJvZ3JhbSwgcG9zaXRpb24sIHZhbHVlLCAwKVxuXG5hZGRTZXhwQWZ0ZXIgPSAocHJvZ3JhbSwgcG9zaXRpb24sIHZhbHVlKSAtPlxuICBzcGxpY2VTZXhwKHByb2dyYW0sIHBvc2l0aW9uLCB2YWx1ZSwgMSlcblxuZ2V0U2V4cCA9IChzZXhwLCBwb3NpdGlvbikgLT5cbiAgIyBsZyBcImdldFNleHA8I3tzZXhwfT48I3twb3NpdGlvbn0+XCJcbiAgaWR4ID0gcG9zaXRpb24ucG9wKClcbiAgaWYgaWR4P1xuICAgIGdldFNleHAoc2V4cC5jaGlsZHJlbltpZHhdLCBwb3NpdGlvbilcbiAgZWxzZVxuICAgIHNleHBcblxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgRURJVE9SXG5jbGFzcyBFZGl0b3JcbiAgY29uc3RydWN0b3I6IChAc3RvcmFnZVNhdmVyLCBAc3RvcmFnZUxvYWRlcikgLT5cbiAgICBAY29tcGlsZWRCb3ggPSBuZXcgVGV4dExheWVyXG4gICAgICB0ZXh0OiAnY29tcGlsZWQnXG4gICAgICBmb250U2l6ZTogMTNcbiAgICAgIGZvbnRGYW1pbHk6IGluY29uc29sYXRhXG4gICAgICB0ZXh0QWxpZ246ICdsZWZ0J1xuICAgICAgeDogMFxuICAgICAgeTogU2NyZWVuLmhlaWdodCAvIDJcbiAgICAgIHdpZHRoOiBTY3JlZW4ud2lkdGggLyAyXG4gICAgICBoZWlnaHQ6IFNjcmVlbi5oZWlnaHQgLyAyXG4gICAgICBjb2xvcjogJyMwMDAnXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRjZGNkY2J1xuICAgICAgcGFkZGluZzogMTBcbiAgICAgIGJvcmRlckNvbG9yOiAnIzAwMCdcbiAgICAgIGJvcmRlcldpZHRoOiAxXG4gICAgQG91dHB1dEJveCA9IG5ldyBUZXh0TGF5ZXJcbiAgICAgIHRleHQ6ICdvdXRwdXQnXG4gICAgICBmb250U2l6ZTogMTNcbiAgICAgIGZvbnRGYW1pbHk6IGluY29uc29sYXRhXG4gICAgICB0ZXh0QWxpZ246ICdsZWZ0J1xuICAgICAgeDogU2NyZWVuLndpZHRoIC8gMlxuICAgICAgeTogU2NyZWVuLmhlaWdodCAvIDJcbiAgICAgIHdpZHRoOiBTY3JlZW4ud2lkdGggLyAyXG4gICAgICBoZWlnaHQ6IFNjcmVlbi5oZWlnaHQgLyAyXG4gICAgICBjb2xvcjogJyMwMDAnXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRjZGNkY2J1xuICAgICAgcGFkZGluZzogMTBcbiAgICAgIGJvcmRlckNvbG9yOiAnIzAwMCdcbiAgICAgIGJvcmRlcldpZHRoOiAxXG4gIGJ1aWxkOiAocHJvZ3JhbSkgLT5cbiAgICBpZiBfLmlzVW5kZWZpbmVkKHByb2dyYW0pXG4gICAgICBwcm9ncmFtID0gQHN0b3JhZ2VMb2FkZXIubG9hZCgpXG4gICAgaWYgbm90IF8uaXNVbmRlZmluZWQoQHRva2VuR3JvdXApXG4gICAgICBAdG9rZW5Hcm91cC5kZXN0cm95KClcbiAgICBAcHJvZ3JhbSA9IHByb2dyYW1cbiAgICBAY3VycmVudFBvc2l0aW9uID0gW11cbiAgICBAY3VycmVudFNFeHAgPSBudWxsXG4gICAgQHRva2VuR3JvdXAgPSBuZXcgTGF5ZXJcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4wKSdcbiAgICBAcm9vdFNFeHAgPSByZW5kZXIgQHByb2dyYW0sIDAsIDAsIFtdLCBudWxsLCBAdG9rZW5Hcm91cFxuICAgIEB0b2tlbkdyb3VwLmhlaWdodCA9IEByb290U0V4cC50b2tlbnNbMF0uaGVpZ2h0XG4gICAgQHRva2VuR3JvdXAud2lkdGggPSBfLnJlZHVjZShfLm1hcChAcm9vdFNFeHAudG9rZW5zLCAodCkgLT4gdC53aWR0aCksIF8uYWRkLCAwKVxuICAgIEB0b2tlbkdyb3VwLnggPSBBbGlnbi5jZW50ZXJcbiAgICBAdG9rZW5Hcm91cC55ID0gKFNjcmVlbi5oZWlnaHQgLyAyKSAtIEB0b2tlbkdyb3VwLmhlaWdodCAtIDEwXG4gIGp1bXA6IChwb3MpIC0+XG4gICAgQGN1cnJlbnRQb3NpdGlvbiA9IF8uY2xvbmUocG9zKVxuICAgIG5ld1NleHAgPSBnZXRTZXhwKEByb290U0V4cCwgcG9zKVxuICAgIEBzZXRDdXJyZW50U0V4cChuZXdTZXhwKVxuICBnbzogKGRpcikgLT5cbiAgICByZXR1cm4gZmFsc2UgaWYgXy5pc05pbChAY3VycmVudFNFeHApIGFuZCBkaXIgaXNudCAnaW4nXG4gICAgdGFyZ2V0U0V4cCA9IGlmIF8uaXNOaWwoQGN1cnJlbnRTRXhwKVxuICAgICAgQHJvb3RTRXhwXG4gICAgZWxzZVxuICAgICAge1xuICAgICAgICBuZXh0OiBAY3VycmVudFNFeHAubmV4dFxuICAgICAgICBwcmV2aW91czogQGN1cnJlbnRTRXhwLnByZXZpb3VzXG4gICAgICAgIGluOiBfLmZpcnN0KEBjdXJyZW50U0V4cC5jaGlsZHJlbilcbiAgICAgICAgb3V0OiBAY3VycmVudFNFeHAucGFyZW50XG4gICAgICB9W2Rpcl1cbiAgICBpZiB0YXJnZXRTRXhwP1xuICAgICAgIyB3YWxrIEByb290U0V4cCwgKHNleHAsIHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpIC0+IHNleHAuZGVzZWxlY3QodmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleClcbiAgICAgICMgQGN1cnJlbnRTRXhwID0gdGFyZ2V0U0V4cFxuICAgICAgIyB3YWxrIEBjdXJyZW50U0V4cCwgKHNleHAsIHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpIC0+IHNleHAuc2VsZWN0KHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpXG4gICAgICBAc2V0Q3VycmVudFNFeHAodGFyZ2V0U0V4cClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZWxzZSBpZiBAY3VycmVudFNFeHAgPT0gQHJvb3RTRXhwIGFuZCBkaXIgPT0gJ291dCdcbiAgICAgIEBzZXRDdXJyZW50U0V4cChudWxsKVxuICAgICAgIyB3YWxrIEByb290U0V4cCwgKHNleHAsIHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpIC0+IHNleHAuZGVzZWxlY3QodmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleClcbiAgICAgICMgQGN1cnJlbnRTRXhwID0gbnVsbFxuICAgICAgcmV0dXJuIHRydWVcbiAgICBlbHNlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgc2V0Q3VycmVudFNFeHA6IChuZXdTZXhwKSAtPlxuICAgIHdhbGsgQHJvb3RTRXhwLCAoc2V4cCwgdmlzaXRlZFRva2VuQnlJZCwgc2libGluZ0luZGV4LCBwYXJlbnRJbmRleCkgLT4gc2V4cC5kZXNlbGVjdCh2aXNpdGVkVG9rZW5CeUlkLCBzaWJsaW5nSW5kZXgsIHBhcmVudEluZGV4KVxuICAgIGlmIG5ld1NleHA/XG4gICAgICBAY3VycmVudFNFeHAgPSBuZXdTZXhwXG4gICAgICB3YWxrIEBjdXJyZW50U0V4cCwgKHNleHAsIHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpIC0+IHNleHAuc2VsZWN0KHZpc2l0ZWRUb2tlbkJ5SWQsIHNpYmxpbmdJbmRleCwgcGFyZW50SW5kZXgpXG4gICAgZWxzZVxuICAgICAgQGN1cnJlbnRTRXhwID0gbnVsbFxuICBnb05leHQ6ICgpIC0+XG4gICAgaWYgQGdvKCduZXh0JylcbiAgICAgIEBjdXJyZW50UG9zaXRpb25bMF0gKz0gMVxuICBnb1ByZXZpb3VzOiAoKSAtPlxuICAgIGlmIEBnbygncHJldmlvdXMnKVxuICAgICAgQGN1cnJlbnRQb3NpdGlvblswXSAtPSAxXG4gIGdvSW46ICgpIC0+XG4gICAgc2V4cCA9IEBjdXJyZW50U0V4cFxuICAgIGlmIEBnbygnaW4nKSAmJiBAY3VycmVudFNFeHAgIT0gQHJvb3RTRXhwXG4gICAgICBAY3VycmVudFBvc2l0aW9uLnVuc2hpZnQoMClcbiAgICAgIEBkZXRhY2goc2V4cClcbiAgZ29PdXQ6ICgpIC0+XG4gICAgc2V4cCA9IEBjdXJyZW50U0V4cFxuICAgIGlmIEBnbygnb3V0JykgJiYgQGN1cnJlbnRTRXhwICE9IG51bGxcbiAgICAgIEBjdXJyZW50UG9zaXRpb24uc2hpZnQoKVxuICAgICAgbGcgJ3JldGFjaDogJywgQGN1cnJlbnRTRXhwXG4gICAgICBAcmV0YWNoKEBjdXJyZW50U0V4cClcbiAgY29tcGlsZTogKCkgLT5cbiAgICBpZiBAY3VycmVudFNFeHA/XG4gICAgICBjb21waWxlZFNvdXJjZSA9IENvbXBpbGVyLmNvbXBpbGUoQGN1cnJlbnRTRXhwLnByb2dyYW0pXG4gICAgICBiZWF1dGlmdWxTb3VyY2UgPSBiZWF1dGlmeShjb21waWxlZFNvdXJjZSwgeyBpbmRlbnRfc2l6ZTogMiB9KVxuICAgICAgQGNvbXBpbGVkQm94LnRleHQgPSBjb21waWxlZFNvdXJjZVxuICAgICAgY29uc29sZS5sb2coXCJbKl0gSU5QVVRcXG5cIiwgQGN1cnJlbnRTRXhwLnByb2dyYW0pXG4gICAgICBjb25zb2xlLmxvZyhcIlsqXSBDT01QSUxFRFxcblwiLCBjb21waWxlZFNvdXJjZSlcbiAgICAgIHRyeVxuICAgICAgICBvdXRwdXQgPSBldmFsKGNvbXBpbGVkU291cmNlKVxuICAgICAgICBAb3V0cHV0Qm94LnRleHQgPSBvdXRwdXRcbiAgICAgICAgY29uc29sZS5sb2cgXCJbKl0gUlVOIE9LXFxuXCIsIG91dHB1dFxuICAgICAgY2F0Y2ggZXJyb3JcbiAgICAgICAgY29uc29sZS5sb2cgXCJbIV0gUlVOIEVSUk9SXFxuXCIsIGVycm9yXG4gICAgICAgIEBvdXRwdXRCb3gudGV4dCA9IGVycm9yLnRvU3RyaW5nKClcbiAgICBlbHNlXG4gICAgICBjb25zb2xlLmxvZyAnWyFdIE5vIGV4cHJlc3Npb24gc2VsZWN0ZWQuJ1xuICBhZGRCZWZvcmU6ICgpIC0+XG4gICAgc2V4cCA9IEBjdXJyZW50U0V4cFxuICAgIGlmIHNleHA/XG4gICAgICByYXdWYWx1ZSA9IHByb21wdChcIkFkZCB3aGF0P1wiKVxuICAgICAgaWYgcmF3VmFsdWU/XG4gICAgICAgIHZhbHVlID0gUGFyc2VyLnBhcnNlKHJhd1ZhbHVlKVxuICAgICAgICBsZyAnVmFsdWU6ICcsIHZhbHVlXG4gICAgICAgIHBvcyA9IF8uY2xvbmUoQGN1cnJlbnRQb3NpdGlvbilcbiAgICAgICAgYWRkU2V4cEJlZm9yZShAcHJvZ3JhbSwgXy5jbG9uZShwb3MpLCB2YWx1ZSlcbiAgICAgICAgbGcgJ2N1cnJlbnRQb3NpdGlvbjogJywgcG9zXG4gICAgICAgIEBidWlsZChAcHJvZ3JhbSlcbiAgICAgICAgQGp1bXAoXy5jbG9uZShwb3MpKVxuICAgICAgICBsZyBAcHJvZ3JhbVxuICAgICAgICBAc3RvcmFnZVNhdmVyLnNhdmUoQHByb2dyYW0pXG4gIGFkZEFmdGVyOiAoKSAtPlxuICAgIHNleHAgPSBAY3VycmVudFNFeHBcbiAgICBpZiBzZXhwP1xuICAgICAgcmF3VmFsdWUgPSBwcm9tcHQoXCJBZGQgd2hhdD9cIilcbiAgICAgIGlmIHJhd1ZhbHVlP1xuICAgICAgICB2YWx1ZSA9IFBhcnNlci5wYXJzZShyYXdWYWx1ZSlcbiAgICAgICAgbGcgJ1ZhbHVlOiAnLCB2YWx1ZVxuICAgICAgICBwb3MgPSBfLmNsb25lKEBjdXJyZW50UG9zaXRpb24pXG4gICAgICAgIGFkZFNleHBBZnRlcihAcHJvZ3JhbSwgXy5jbG9uZShwb3MpLCB2YWx1ZSwgMSlcbiAgICAgICAgbGcgJ2N1cnJlbnRQb3NpdGlvbjogJywgcG9zXG4gICAgICAgIEBidWlsZChAcHJvZ3JhbSlcbiAgICAgICAgaWYgcG9zLmxlbmd0aCA+IDBcbiAgICAgICAgICBwb3NbMF0gKz0gMVxuICAgICAgICBAanVtcChwb3MpXG4gICAgICAgIGxnIEBwcm9ncmFtXG4gICAgICAgIEBzdG9yYWdlU2F2ZXIuc2F2ZShAcHJvZ3JhbSlcbiAgZGVsZXRlOiAoKSAtPlxuICAgIGlmIEBjdXJyZW50U0V4cD9cbiAgICAgIHBvcyA9IF8uY2xvbmUoQGN1cnJlbnRQb3NpdGlvbilcbiAgICAgIGRlbGV0ZVNleHAoQHByb2dyYW0sIEBjdXJyZW50UG9zaXRpb24pXG4gICAgICBAYnVpbGQoQHByb2dyYW0pXG4gICAgICBwb3NbMF0gLT0gMSBpZiBwb3NbMF0gPiAwXG4gICAgICBAanVtcChwb3MpXG4gICAgICBAc3RvcmFnZVNhdmVyLnNhdmUoQHByb2dyYW0pXG4gIHJlcGxhY2U6ICgpIC0+XG4gICAgc2V4cCA9IEBjdXJyZW50U0V4cFxuICAgIGlmIHNleHA/XG4gICAgICByYXdWYWx1ZSA9IHByb21wdChcIlJlcGxhY2UgJyN7c2V4cH0nIHdpdGggd2hhdD9cIilcbiAgICAgIGlmIHJhd1ZhbHVlP1xuICAgICAgICB2YWx1ZSA9IFBhcnNlci5wYXJzZShyYXdWYWx1ZSlcbiAgICAgICAgbGcgJ1ZhbHVlOiAnLCB2YWx1ZVxuICAgICAgICBwb3MgPSBfLmNsb25lKEBjdXJyZW50UG9zaXRpb24pXG4gICAgICAgIHJlcGxhY2VTZXhwKEBwcm9ncmFtLCBfLmNsb25lKHBvcyksIHZhbHVlKVxuICAgICAgICBsZyAnY3VycmVudFBvc2l0aW9uOiAnLCBwb3NcbiAgICAgICAgQGJ1aWxkKEBwcm9ncmFtKVxuICAgICAgICBAanVtcChfLmNsb25lKHBvcykpXG4gICAgICAgIGxnIEBwcm9ncmFtXG4gICAgICAgIEBzdG9yYWdlU2F2ZXIuc2F2ZShAcHJvZ3JhbSlcbiAgZGV0YWNoOiAoc2V4cCkgLT5cbiAgICBkeSA9IDUwXG4gIHJldGFjaDogKHNleHApIC0+XG4gICAgZHkgPSA1MFxuXG5lZGl0b3IgPSBuZXcgRWRpdG9yKG5ldyBTdG9yYWdlU2F2ZXIoKSwgbmV3IFN0b3JhZ2VMb2FkZXIoKSlcbmVkaXRvci5idWlsZCgpXG5cbmtleSA9XG4gIGg6IDcyXG4gIGk6IDczXG4gIGo6IDc0XG4gIGs6IDc1XG4gIGw6IDc2XG4gIHI6IDgyXG4gIGE6IDY1XG4gIHc6IDg3XG4gIHM6IDgzXG4gIGQ6IDY4XG4gIFwiO1wiOiAxODZcbiAgc3BhY2U6IDMyXG4gIGVudGVyOiAxM1xuICBzaGlmdDogMTZcblxuS2V5Rm9yQ29tbWFuZCA9XG4gIEdPX0lOOiBrZXkualxuICBHT19PVVQ6IGtleS5rXG4gIEdPX1BSRVZJT1VTOiBrZXkuaFxuICBHT19ORVhUOiBrZXkubFxuICBDT01QSUxFOiBrZXkuZW50ZXJcbiAgUkVQTEFDRToga2V5LnJcbiAgQUREX0JFRk9SRToga2V5LmFcbiAgQUREX0FGVEVSOiBrZXkuaVxuICBERUxFVEU6IGtleS5kXG4gIERFVEFDSDoga2V5LnNwYWNlXG5cbmNsYXNzIEtleUhhbmRsZXJcbiAgY29uc3RydWN0b3I6IChAZWRpdG9yKSAtPlxuICAgIEBpc0Rvd24gPSB7fVxuICAgIEV2ZW50cy53cmFwKHdpbmRvdykuYWRkRXZlbnRMaXN0ZW5lciAna2V5dXAnLCAoZXZlbnQpID0+XG4gICAgICAjIGNvbnNvbGUubG9nICdrZXkgdXAnLCBldmVudC5rZXlDb2RlXG4gICAgICBkZWxldGUgQGlzRG93bltldmVudC5rZXlDb2RlXVxuICAgIEV2ZW50cy53cmFwKHdpbmRvdykuYWRkRXZlbnRMaXN0ZW5lciAna2V5ZG93bicsIChldmVudCkgPT5cbiAgICAgIGNvbnNvbGUubG9nICdrZXkgZG93bicsIGV2ZW50LmtleUNvZGVcbiAgICAgIGN1cnJQb3MgPSBfLmNsb25lKGVkaXRvci5jdXJyZW50UG9zaXRpb24pXG4gICAgICBAaXNEb3duW2V2ZW50LmtleUNvZGVdID0gdHJ1ZVxuICAgICAgaWYgZXZlbnQua2V5Q29kZSBpcyBLZXlGb3JDb21tYW5kLkdPX0lOXG4gICAgICAgIEBlZGl0b3IuZ29JbigpXG4gICAgICBpZiBldmVudC5rZXlDb2RlIGlzIEtleUZvckNvbW1hbmQuR09fT1VUXG4gICAgICAgIEBlZGl0b3IuZ29PdXQoKVxuICAgICAgaWYgZXZlbnQua2V5Q29kZSBpcyBLZXlGb3JDb21tYW5kLkdPX05FWFRcbiAgICAgICAgQGVkaXRvci5nb05leHQoKVxuICAgICAgaWYgZXZlbnQua2V5Q29kZSBpcyBLZXlGb3JDb21tYW5kLkdPX1BSRVZJT1VTXG4gICAgICAgIEBlZGl0b3IuZ29QcmV2aW91cygpXG4gICAgICBpZiBldmVudC5rZXlDb2RlIGlzIEtleUZvckNvbW1hbmQuQ09NUElMRVxuICAgICAgICBAZWRpdG9yLmNvbXBpbGUoKVxuICAgICAgaWYgZXZlbnQua2V5Q29kZSBpcyBLZXlGb3JDb21tYW5kLlJFUExBQ0VcbiAgICAgICAgQGVkaXRvci5yZXBsYWNlKClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5BRERfQkVGT1JFXG4gICAgICAgIEBlZGl0b3IuYWRkQmVmb3JlKClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5BRERfQUZURVJcbiAgICAgICAgQGVkaXRvci5hZGRBZnRlcigpXG4gICAgICBpZiBldmVudC5rZXlDb2RlIGlzIEtleUZvckNvbW1hbmQuREVMRVRFXG4gICAgICAgIEBlZGl0b3IuZGVsZXRlKClcbiAgICAgIGlmIGV2ZW50LmtleUNvZGUgaXMgS2V5Rm9yQ29tbWFuZC5ERVRBQ0hcbiAgICAgICAgQGVkaXRvci5kZXRhY2goKVxuICAgICAgbGcgXCJjdXJyZW50IHBvc2l0aW9uXCIsICBlZGl0b3IuY3VycmVudFBvc2l0aW9uXG5cbmtleUhhbmRsZXIgPSBuZXcgS2V5SGFuZGxlcihlZGl0b3IpXG5cbmNvbnNvbGUubG9nICdydW5uaW5nLi4uJ1xuIl19
//# sourceURL=/Users/gvieira/code/hare/hare_framer/src_coffee/main.coffee