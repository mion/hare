// Generated by CoffeeScript 1.12.7
(function() {
  var Position, __;

  __ = require('./utils');

  Position = require('./position');

  module.exports = (function() {
    function exports(grid, creature, targetPos) {
      this.grid = grid;
      this.creature = creature;
      this.targetPos = targetPos;
    }

    exports.prototype.isValid = function() {
      return this.grid.isWithinBounds(this.targetPos) && this.grid.isWalkable(this.targetPos);
    };

    exports.prototype.perform = function() {
      var anim;
      if (this.creature.isAnimating) {
        return false;
      }
      if (!this.isValid()) {
        return false;
      }
      anim = new Animation(this.creature, {
        point: __.centerizedPoint(this.creature, this.grid.cellAt(this.targetPos))
      });
      anim.start();
      anim.on(Events.AnimationEnd, (function(_this) {
        return function() {
          return _this.creature.pos = new Position(_this.targetPos.i, _this.targetPos.j);
        };
      })(this));
      return true;
    };

    return exports;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW92ZW1lbnQuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbInNyY19jb2ZmZWUvbW92ZW1lbnQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBLE1BQUE7O0VBQUEsRUFBQSxHQUFLLE9BQUEsQ0FBUSxTQUFSOztFQUNMLFFBQUEsR0FBVyxPQUFBLENBQVEsWUFBUjs7RUFFTCxNQUFNLENBQUM7SUFDRSxpQkFBQyxJQUFELEVBQVEsUUFBUixFQUFtQixTQUFuQjtNQUFDLElBQUMsQ0FBQSxPQUFEO01BQU8sSUFBQyxDQUFBLFdBQUQ7TUFBVyxJQUFDLENBQUEsWUFBRDtJQUFuQjs7c0JBQ2IsT0FBQSxHQUFTLFNBQUE7YUFDUCxJQUFDLENBQUEsSUFBSSxDQUFDLGNBQU4sQ0FBcUIsSUFBQyxDQUFBLFNBQXRCLENBQUEsSUFBcUMsSUFBQyxDQUFBLElBQUksQ0FBQyxVQUFOLENBQWlCLElBQUMsQ0FBQSxTQUFsQjtJQUQ5Qjs7c0JBRVQsT0FBQSxHQUFTLFNBQUE7QUFDUCxVQUFBO01BQUEsSUFBZ0IsSUFBQyxDQUFBLFFBQVEsQ0FBQyxXQUExQjtBQUFBLGVBQU8sTUFBUDs7TUFDQSxJQUFBLENBQW9CLElBQUMsQ0FBQSxPQUFELENBQUEsQ0FBcEI7QUFBQSxlQUFPLE1BQVA7O01BQ0EsSUFBQSxHQUFPLElBQUksU0FBSixDQUFjLElBQUMsQ0FBQSxRQUFmLEVBQ0w7UUFBQSxLQUFBLEVBQU8sRUFBRSxDQUFDLGVBQUgsQ0FBbUIsSUFBQyxDQUFBLFFBQXBCLEVBQThCLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTixDQUFhLElBQUMsQ0FBQSxTQUFkLENBQTlCLENBQVA7T0FESztNQUVQLElBQUksQ0FBQyxLQUFMLENBQUE7TUFDQSxJQUFJLENBQUMsRUFBTCxDQUFRLE1BQU0sQ0FBQyxZQUFmLEVBQTZCLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQTtpQkFDM0IsS0FBQyxDQUFBLFFBQVEsQ0FBQyxHQUFWLEdBQWdCLElBQUksUUFBSixDQUFhLEtBQUMsQ0FBQSxTQUFTLENBQUMsQ0FBeEIsRUFBMkIsS0FBQyxDQUFBLFNBQVMsQ0FBQyxDQUF0QztRQURXO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE3QjtBQUVBLGFBQU87SUFSQTs7Ozs7QUFQWCIsInNvdXJjZXNDb250ZW50IjpbIl9fID0gcmVxdWlyZSAnLi91dGlscydcblBvc2l0aW9uID0gcmVxdWlyZSAnLi9wb3NpdGlvbidcblxuY2xhc3MgbW9kdWxlLmV4cG9ydHNcbiAgY29uc3RydWN0b3I6IChAZ3JpZCwgQGNyZWF0dXJlLCBAdGFyZ2V0UG9zKSAtPlxuICBpc1ZhbGlkOiAoKSAtPlxuICAgIEBncmlkLmlzV2l0aGluQm91bmRzKEB0YXJnZXRQb3MpIGFuZCBAZ3JpZC5pc1dhbGthYmxlKEB0YXJnZXRQb3MpXG4gIHBlcmZvcm06ICgpIC0+XG4gICAgcmV0dXJuIGZhbHNlIGlmIEBjcmVhdHVyZS5pc0FuaW1hdGluZ1xuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQGlzVmFsaWQoKVxuICAgIGFuaW0gPSBuZXcgQW5pbWF0aW9uIEBjcmVhdHVyZSxcbiAgICAgIHBvaW50OiBfXy5jZW50ZXJpemVkUG9pbnQoQGNyZWF0dXJlLCBAZ3JpZC5jZWxsQXQoQHRhcmdldFBvcykpXG4gICAgYW5pbS5zdGFydCgpXG4gICAgYW5pbS5vbiBFdmVudHMuQW5pbWF0aW9uRW5kLCA9PlxuICAgICAgQGNyZWF0dXJlLnBvcyA9IG5ldyBQb3NpdGlvbihAdGFyZ2V0UG9zLmksIEB0YXJnZXRQb3MuailcbiAgICByZXR1cm4gdHJ1ZVxuIl19
//# sourceURL=/Users/gvieira/code/hare/hare_framer/src_coffee/movement.coffee